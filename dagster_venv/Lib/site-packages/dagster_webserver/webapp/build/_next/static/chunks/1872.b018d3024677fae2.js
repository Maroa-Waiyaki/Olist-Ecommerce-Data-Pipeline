"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1872],{93812:function(e,t,n){n.d(t,{B:function(){return a},X:function(){return c}});var r=n(73235),i=n(89130),s=n(78491);function o(){let e=(0,r._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}function l(){let e=(0,r._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return l=function(){return e},e}let a=(0,i.Ps)(o(),s.B),c=(0,i.Ps)(l(),a)},4733:function(e,t,n){n.d(t,{V:function(){return f}});var r=n(52322),i=n(14934),s=n(51484),o=n(79106),l=n(89891),a=n(35292),c=n(80122),d=n(37504),u=n(1747),h=n(35505),p=n(22791),m=n(88257),x=n(2278),g=n(58905);let f=e=>{let{loading:t,ticks:n,statuses:d,setStatuses:u,setSelectedTick:h,setTableView:f,paginationProps:j}=e;return(0,r.jsxs)(i.x,{children:[(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(s.h,{activeItems:new Set(["evaluations"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{f(e)}}),!t||(null==n?void 0:n.length)?null:(0,r.jsx)(o.$,{purpose:"body-text"})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)(v,{statuses:d,setStatuses:u,status:m.izS.STARTED}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:m.izS.SUCCESS}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:m.izS.FAILURE}),(0,r.jsx)(v,{statuses:d,setStatuses:u,status:m.izS.SKIPPED})]})]}),(0,r.jsxs)(y,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,r.jsx)("th",{style:{width:90},children:"Status"}),(0,r.jsx)("th",{style:{width:90},children:"Duration"}),(0,r.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,r.jsx)("tbody",{children:n.map((e,t)=>{let n=0!==t&&e.status===m.izS.STARTED&&!j.hasPrevCursor;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(p.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,r.jsx)("td",{children:(0,r.jsx)(g.a,{tick:e,isStuckStarted:n})}),(0,r.jsx)("td",{children:n?" - ":(0,r.jsx)(x.Q,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,r.jsx)("td",{children:[m.izS.SKIPPED,m.izS.SUCCESS].includes(e.status)?(0,r.jsx)(l.Z,{onClick:()=>{h(e)},children:(0,r.jsxs)(a.pN,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(c.pI,{...j})})]})},j={[m.izS.SKIPPED]:"None requested",[m.izS.STARTED]:"Started",[m.izS.FAILURE]:"Failed",[m.izS.SUCCESS]:"Requested"};function v(e){let{status:t,statuses:n,setStatuses:i}=e;return(0,r.jsx)(d.X,{label:j[t],checked:n.has(t),onChange:()=>{let e=new Set(n);n.has(t)?e.delete(t):e.add(t),i(e)}})}let y=(0,h.ZP)(u.i).withConfig({componentId:"sc-d9b5bf3f-0"})(["th,td{vertical-align:middle !important;}"])},76575:function(e,t,n){n.d(t,{d:function(){return N}});var r=n(73235),i=n(52322),s=n(40794),o=n(89130),l=n(14934),a=n(35292),c=n(39013),d=n(92917),u=n(79106),h=n(88510),p=n(2784),m=n(47933),x=n(35505),g=n(22791),f=n(44900),j=n(88257),v=n(44030),y=n(34219),S=n(17008),b=n(65822),w=n(10539),k=n(84842),E=n(37680),C=n(75442);function T(){let e=(0,r._)(["\n  query AssetGroupAndLocationQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        definition {\n          id\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return T=function(){return e},e}let I="30% 17% 53%",N=(0,p.memo)(e=>{let{tick:t,isOpen:n,close:r}=e,[s,o]=(0,p.useState)(""),d=(0,p.useMemo)(()=>t?t.requestedAssetKeys.filter(e=>e.path.join("/").includes(s)):[],[t,s]),u=(null==t?void 0:t.requestedAssetKeys.length)||0,m=(0,p.useRef)(null),x=(0,h.MG)({count:d.length,getScrollElement:()=>m.current,estimateSize:()=>34,overscan:10}),y=x.getTotalSize(),b=x.getVirtualItems(),w=(0,p.useMemo)(()=>{let e={};return null==t||t.requestedMaterializationsForAssets.forEach(t=>{let{assetKey:n,partitionKeys:r}=t;e[(0,f.Je)(n)]=r}),e},[null==t?void 0:t.requestedMaterializationsForAssets]),k=(0,p.useMemo)(()=>s&&!d.length?(0,i.jsx)(E.LS,{title:"No matching asset keys",description:(0,i.jsxs)(i.Fragment,{children:["No matching asset keys for ",(0,i.jsx)("strong",{children:s})]})}):(null==t?void 0:t.requestedAssetKeys.length)?(0,i.jsxs)("div",{style:{overflow:"scroll"},ref:m,children:[(0,i.jsxs)(S.VJ,{templateColumns:I,sticky:!0,children:[(0,i.jsx)(S.qN,{children:"Asset"}),(0,i.jsx)(S.qN,{children:"Group"}),(0,i.jsx)(S.qN,{children:"Result"})]}),(0,i.jsx)(S.Nh,{$totalHeight:y,children:b.map(e=>{let{index:n,key:r,size:s,start:o}=e,l=d[n];return(0,i.jsx)(P,{$height:s,$start:o,assetKey:l,partitionKeys:w[(0,f.Je)(l)],evaluationId:t.autoMaterializeAssetEvaluationId},r)})})]}):(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,i.jsx)(a.YS,{color:c.$(),children:"None"})}),[w,d,b,s,t,y]);return(0,i.jsx)(E.Vm,{isOpen:n,setIsOpen:r,height:400,header:(0,i.jsx)(E.Lv,{title:t?(0,i.jsx)("div",{children:(0,i.jsx)(g.E,{timestamp:{unix:t.timestamp},timeFormat:{showTimezone:!0}})}):"",showSearch:u>0,placeholder:"Filter by asset key…",queryString:s,setQueryString:o}),content:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:t?(0,i.jsx)(v.c,{tick:t}):null}),(null==t?void 0:t.status)===j.izS.STARTED?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:d.length>0?void 0:"bottom",children:(0,i.jsx)(a.Tj,{children:"Materializations requested"})}),k]})]})})}),P=e=>{let{$start:t,$height:n,assetKey:r,partitionKeys:o,evaluationId:h}=e,p=(null==o?void 0:o.length)||1,x=(0,s.a)(A,{fetchPolicy:"cache-and-network",variables:{assetKey:{path:r.path}}}),{data:g}=x;(0,y.Hu)(x,"AssetGroupAndLocationQuery");let f=(null==g?void 0:g.assetOrError.__typename)==="Asset"?g.assetOrError:null,j=null==f?void 0:f.definition,v=j?(0,b.kQ)(j.repository.name,j.repository.location.name):null;return(0,i.jsx)(S.X2,{$start:t,$height:n,children:(0,i.jsxs)(R,{border:"bottom",children:[(0,i.jsx)(S.E5,{children:(0,i.jsx)(k.R,{path:r.path,icon:"asset",textStyle:"middle-truncate"})}),(0,i.jsx)(S.E5,{children:g?j&&j.groupName&&v?(0,i.jsx)(m.rU,{to:(0,w.$U)(v,"/asset-groups/".concat(j.groupName)),children:(0,i.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,i.jsx)(d.JO,{color:c.$(),name:"asset_group"}),j.groupName]})}):(0,i.jsx)(a.YS,{color:c.$(),children:"Asset not found"}):(0,i.jsx)(u.$,{purpose:"body-text"})}),(0,i.jsx)(S.E5,{children:(0,i.jsxs)(m.rU,{to:(0,C.p)(r,{view:"automation",evaluation:"".concat(h)}),children:[p," materialization",1===p?"":"s"," requested"]})})]})})},R=(0,x.ZP)(l.x).withConfig({componentId:"sc-3c2a5bf5-0"})(["display:grid;grid-template-columns:",";height:100%;> *{justify-content:center;}"],I),A=(0,o.Ps)(T())},28363:function(e,t,n){n.d(t,{o:function(){return p}});var r=n(52322),i=n(14934),s=n(51484),o=n(80122),l=n(35505),a=n(16336),c=n(34219),d=n(89010),u=n(6268),h=n(15332);let p=e=>{var t;let{filterTags:n,setTableView:l}=e,{queryResult:p,paginationProps:x}=(0,h.l)({nextCursorForResult:e=>{var t;if("Runs"===e.pipelineRunsOrError.__typename)return null===(t=e.pipelineRunsOrError.results[14])||void 0===t?void 0:t.id},getResultArray:e=>e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[],variables:{filter:{tags:[...n||[],{key:"dagster/auto_materialize",value:"true"}]}},query:u.RUNS_ROOT_QUERY,pageSize:15});(0,c.Hu)(p,"RunsRootQuery"),(0,a.C4)(p,15e3);let g=null===(t=p.data||p.previousData)||void 0===t?void 0:t.pipelineRunsOrError;return(0,r.jsxs)(i.x,{children:[(0,r.jsxs)(m,{children:[(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:(0,r.jsx)(s.h,{activeItems:new Set(["runs"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{l(e)}})}),(0,r.jsx)(d.AL,{runs:(null==g?void 0:g.__typename)==="Runs"?g.results:[]})]}),(0,r.jsx)("div",{style:{paddingBottom:"16px"},children:(0,r.jsx)(o.pI,{...x})})]})},m=l.ZP.div.withConfig({componentId:"sc-247be95d-0"})(["position:relative;> *:nth-child(2){position:absolute;right:0;top:0;}"])},84927:function(e,t,n){n.d(t,{V2:function(){return H},WH:function(){return B},qG:function(){return U}});var r=n(73235),i=n(52322),s=n(33379),o=n(89130),l=n(34147),a=n(55010),c=n(60603),d=n(38491),u=n(92917),h=n(2784),p=n(7267),m=n(92506),x=n(71291),g=n(9875),f=n(43984),j=n(65822),v=n(20718);function y(){let e=(0,r._)(["\n  fragment BackfillStepStatusDialogBackfillFragment on PartitionBackfill {\n    id\n    partitionNames\n    partitionSet {\n      name\n      pipelineName\n      repositoryOrigin {\n        repositoryName\n        repositoryLocationName\n      }\n    }\n  }\n"]);return y=function(){return e},e}function S(e){return!!e&&null!==e.partitionSet&&null!==e.partitionNames}let b=e=>{let{backfill:t,onClose:n}=e;return(0,i.jsxs)(m.Vq,{isOpen:!!(null==t?void 0:t.partitionSet),title:"Step status for backfill: ".concat(null==t?void 0:t.id),onClose:n,style:{width:"80vw"},children:[(()=>{if(!S(t))return null;let e=(0,j.kQ)(t.partitionSet.repositoryOrigin.repositoryName,t.partitionSet.repositoryOrigin.repositoryLocationName);return(0,i.jsx)(k,{backfill:t,partitionSet:t.partitionSet,partitionNames:t.partitionNames,repoAddress:e,onClose:n})})(),(0,i.jsx)(m.cN,{topBorder:!0,children:(0,i.jsx)(d.zx,{onClick:n,children:"Done"})})]})},w=(0,o.Ps)(y()),k=e=>{let{backfill:t,partitionSet:n,partitionNames:r,repoAddress:s}=e,[o,l]=(0,h.useState)(60),[a,c]=(0,h.useState)(0),d=(0,h.useMemo)(()=>[{token:"tag",value:"dagster/backfill=".concat(t.id)}],[t.id]),u=(0,g.T)({partitionSetName:n.name,partitionTagName:f.H.Partition,partitionNames:r,pageSize:o,runsFilter:d,repositorySelector:(0,v.$)(s),jobName:n.pipelineName,offset:a,skipQuery:!t});return(0,i.jsx)(x.ux,{partitionNames:r,partitions:u,pipelineName:null==n?void 0:n.pipelineName,repoAddress:s,setPageSize:l,offset:a,setOffset:c})};var E=n(40794),C=n(94655),T=n(78491),I=n(88257),N=n(59351),P=n(96569);function R(){let e=(0,r._)(["\n  fragment BackfillTerminationDialogBackfillFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    numCancelable\n  }\n"]);return R=function(){return e},e}function A(){let e=(0,r._)(["\n  mutation CancelBackfill($backfillId: String!) {\n    cancelPartitionBackfill(backfillId: $backfillId) {\n      ... on CancelBackfillSuccess {\n        backfillId\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return A=function(){return e},e}let O=e=>{let{backfill:t,onClose:n,onComplete:r}=e,[o]=(0,s.D)(z),{data:l}=(0,E.a)(C.cv,{variables:{backfillId:(null==t?void 0:t.id)||""},notifyOnNetworkStatusChange:!0,skip:!t}),[a,c]=(0,h.useState)(!1),u=(0,h.useMemo)(()=>{var e;if(!t||!l||"PartitionBackfill"!==l.partitionBackfillOrError.__typename)return{};let n=null===(e=l.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results.filter(e=>e.runStatus&&e.runId&&N.oV.has(e.runStatus));return(null==n?void 0:n.reduce((e,t)=>(t&&t.runId&&(e[t.runId]=!0),e),{}))||{}},[t,l]);if(!t||!l)return null;let p=t.numCancelable,x=async()=>{c(!0),await o({variables:{backfillId:t.id}}),r(),c(!1),n()};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Vq,{isOpen:!!t&&t.status!==I.Jv3.CANCELED&&(t.isAssetBackfill||!!p),title:"Cancel backfill",onClose:n,children:[t.isAssetBackfill?(0,i.jsx)(m.a7,{children:"Confirm cancellation of asset backfill? This will mark unfinished runs as canceled."}):(0,i.jsxs)(m.a7,{children:["There ",1===p?"is 1 partition ":"are ".concat(p," partitions "),"yet to be queued or launched."]}),(0,i.jsxs)(m.cN,{children:[(0,i.jsx)(d.zx,{intent:"none",onClick:n,children:"Close"}),a?(0,i.jsx)(d.zx,{intent:"danger",disabled:!0,children:"Canceling..."}):(0,i.jsx)(d.zx,{intent:"danger",onClick:x,children:"Cancel backfill"})]})]}),u&&(0,i.jsx)(P.A,{isOpen:!!t&&(!p||"REQUESTED"!==t.status)&&!!Object.keys(u).length,onClose:n,onComplete:r,selectedRuns:u})]})},_=(0,o.Ps)(R()),z=(0,o.Ps)(A(),T.B);var D=n(57755),F=n(8068),M=n(50309),L=n(23399),$=n(18856);function q(){let e=(0,r._)(["\n  fragment BackfillActionsBackfillFragment on PartitionBackfill {\n    id\n    hasCancelPermission\n    hasResumePermission\n    isAssetBackfill\n    status\n    numCancelable\n\n    ...BackfillStepStatusDialogBackfillFragment\n    ...BackfillTerminationDialogBackfillFragment\n  }\n\n  ","\n  ","\n"]);return q=function(){return e},e}function U(e,t){if(!e.hasCancelPermission||!t)return!1;let n=t[I.VOA.QUEUED]||0,r=t[I.VOA.STARTED]||0;return n>0||r>0}let B=e=>{let{backfill:t,canCancelRuns:n,refetch:r}=e,o=(0,p.k6)(),m=(0,$.it)([{token:"tag",value:"dagster/backfill=".concat(t.id)}]),[x,g]=(0,h.useState)(!1),[f,j]=(0,h.useState)(!1),[v]=(0,s.D)(D.g),y=async()=>{let{data:e}=await v({variables:{backfillId:t.id}});if(e&&"ResumeBackfillSuccess"===e.resumePartitionBackfill.__typename)r();else if(e&&"UnauthorizedError"===e.resumePartitionBackfill.__typename)await (0,M.B7)({message:(0,i.jsx)(l.Z,{direction:"column",spacing:4,children:(0,i.jsx)("div",{children:"Attempted to retry the backfill in read-only mode. This backfill was not retried."})}),icon:"error",intent:"danger"});else if(e&&"PythonError"===e.resumePartitionBackfill.__typename){let t=e.resumePartitionBackfill;await (0,M.B7)({message:(0,i.jsx)("div",{children:"An unexpected error occurred. This backfill was not retried."}),icon:"error",intent:"danger",action:{text:"View error",onClick:()=>(0,F._K)({body:(0,i.jsx)(L.T9,{error:t})})}})}},w=t.hasCancelPermission&&(t.isAssetBackfill&&t.status===I.Jv3.REQUESTED||t.numCancelable>0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.J,{position:"bottom-right",content:(0,i.jsxs)(c.v2,{children:[(0,i.jsx)(c.sN,{text:"View backfill runs",icon:"settings_backup_restore",onClick:()=>o.push(m)}),(0,i.jsx)(c.sN,{disabled:!S(t),text:"View step status",icon:"view_list",onClick:()=>{j(!0)}}),(0,i.jsx)(c.sN,{disabled:!(t.hasResumePermission&&t.status===I.Jv3.FAILED&&t.partitionSet),text:"Resume failed backfill",title:"Submits runs for all partitions in the backfill that do not have a corresponding run. Does not retry failed runs.",icon:"refresh",onClick:()=>y()}),(0,i.jsx)(c.sN,{text:w?"Cancel backfill submission":"Terminate unfinished runs",icon:"cancel",intent:"danger",disabled:!(w||n),onClick:()=>g(!0)})]}),children:(0,i.jsx)(d.zx,{icon:(0,i.jsx)(u.JO,{name:"expand_more"})})}),(0,i.jsx)(b,{backfill:f?t:void 0,onClose:()=>j(!1)}),(0,i.jsx)(O,{backfill:x?t:void 0,onClose:()=>g(!1),onComplete:()=>r()})]})},H=(0,o.Ps)(q(),w,_)},94655:function(e,t,n){n.d(t,{FW:function(){return q},cv:function(){return W}});var r=n(73235),i=n(52322),s=n(3842),o=n(89130),l=n(39013),a=n(35292),c=n(14934),d=n(92917),u=n(43212),h=n(24471),p=n.n(h),m=n(2784),x=n(47933),g=n(7267),f=n(35505),j=n(84927),v=n(32959),y=n(8068),S=n(23399),b=n(16336),w=n(44900),k=n(88257),E=n(32996),C=n(34219),T=n(33847),I=n(40250),N=n(66463),P=n(59351),R=n(96850),A=n(18856),O=n(86269),_=n(83738),z=n(100),D=n(65822),F=n(22563),M=n(10539);function L(){let e=(0,r._)(["\n  query SingleBackfillCountsQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatusCounts {\n          runStatus\n          count\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}function $(){let e=(0,r._)(["\n  query SingleBackfillQuery($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ... on PartitionBackfill {\n        id\n        partitionStatuses {\n          ...PartitionStatusesForBackfill\n        }\n      }\n    }\n  }\n\n  fragment PartitionStatusesForBackfill on PartitionStatuses {\n    results {\n      id\n      partitionName\n      runId\n      runStatus\n    }\n  }\n"]);return $=function(){return e},e}let q=e=>null===e.backfill.numPartitions||null===e.backfill.partitionNames||e.backfill.isAssetBackfill?(0,i.jsx)(B,{...e,counts:null,statuses:null,statusQueryResult:null}):(0,i.jsx)(U,{backfillId:e.backfill.id,numPartitions:e.backfill.numPartitions,children:t=>(0,i.jsx)(B,{...e,...t})}),U=e=>{let{backfillId:t,numPartitions:n}=e,r=(0,s.t)(W,{variables:{backfillId:t},notifyOnNetworkStatusChange:!0});(0,C.Hu)(r[1],"SingleBackfillQuery");let i=(0,s.t)(G,{variables:{backfillId:t},notifyOnNetworkStatusChange:!0});(0,C.Hu)(i[1],"SingleBackfillCountsQuery");let[o,l]=(n||0)>H?i:r;(0,_.v5)(o),(0,b.C4)(l,b.dT);let{data:a}=l,{counts:c,statuses:d}=m.useMemo(()=>{var e;if((null==a?void 0:a.partitionBackfillOrError.__typename)!=="PartitionBackfill")return{counts:null,statuses:null};if("partitionStatusCounts"in a.partitionBackfillOrError)return{counts:Object.fromEntries(a.partitionBackfillOrError.partitionStatusCounts.map(e=>[e.runStatus,e.count])),statuses:null};let t=(null===(e=a.partitionBackfillOrError.partitionStatuses)||void 0===e?void 0:e.results)||null;return{counts:p()(t,e=>e.runStatus),statuses:t}},[a]);return e.children({counts:c,statuses:d,statusQueryResult:l})},B=e=>{let{backfill:t,allPartitions:n,showBackfillTarget:r,onShowPartitionsRequested:s,refetch:o,counts:c,statuses:d,statusQueryResult:u}=e,h=t.partitionSet?(0,D.kQ)(t.partitionSet.repositoryOrigin.repositoryName,t.partitionSet.repositoryOrigin.repositoryLocationName):null;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{width:120},children:(0,i.jsx)(a.fv,{children:(0,i.jsx)(x.rU,{to:t.isAssetBackfill?"/overview/backfills/".concat(t.id):(0,A.it)([{token:"tag",value:"dagster/backfill=".concat(t.id)}]),children:t.id})})}),(0,i.jsx)("td",{style:{width:220},children:t.timestamp?(0,i.jsx)(O.v,{timestamp:t.timestamp}):"-"}),r?(0,i.jsx)("td",{style:{width:"20%"},children:(0,i.jsx)(Z,{backfill:t,repoAddress:h})}):null,(0,i.jsx)("td",{style:{width:n?300:140},children:(0,i.jsx)(V,{backfill:t,allPartitions:n,onExpand:()=>s(t)})}),(0,i.jsx)("td",{style:{width:160},children:(0,i.jsx)(N.f,{tags:t.tags,repoAddress:h})}),(0,i.jsx)("td",{style:{width:140},children:(null==u?void 0:u.loading)?(0,i.jsx)("div",{style:{color:l.$()},children:"Loading"}):(0,i.jsx)(Q,{backfill:t,counts:c})}),(0,i.jsx)("td",{children:t.isValidSerialization?(null==u?void 0:u.loading)?(0,i.jsx)("div",{style:{color:l.$()},children:"Loading"}):c?(0,i.jsx)(K,{backfill:t,counts:c,statuses:d}):(0,i.jsx)("div",{style:{color:l.$()},children:"–"}):(0,i.jsx)("p",{children:"A partitions definition has changed since this backfill ran."})}),(0,i.jsx)("td",{children:(0,i.jsx)(j.WH,{backfill:t,canCancelRuns:(0,j.qG)(t,c),refetch:o})})]})},H=1e3,K=e=>{let{backfill:t,statuses:n,counts:r}=e,s=(0,g.k6)(),o=Object.entries(r).reduce((e,t)=>{let[n,r]=t;return e[n]=(e[n]||0)+r,e},{}),l=m.useMemo(()=>({runStatusForPartitionKey:e=>{var t;return(null==n?void 0:null===(t=n.filter(t=>t.partitionName===e)[0])||void 0===t?void 0:t.runStatus)||k.VOA.NOT_STARTED}}),[n]);return n&&t.partitionNames?(0,i.jsx)(E.b,{partitionNames:t.partitionNames,health:l,splitPartitions:!0,onClick:e=>{let t=n.find(t=>t.partitionName===e);(null==t?void 0:t.runId)&&s.push("/runs/".concat(t.runId))}}):(0,i.jsx)(R.Yo,{succeededCount:o[k.VOA.SUCCESS]||0,inProgressCount:o[k.VOA.STARTED]||0,failedCount:o[k.VOA.FAILURE]||0})},Z=e=>{let{backfill:t,repoAddress:n}=e,r=(0,z.Ux)(n),{assetSelection:s,partitionSet:o,partitionSetName:a}=t,u=(0,w.pv)(a||"");return(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[u?null:o&&r?(0,i.jsx)(x.rU,{style:{fontWeight:500},to:(0,M.jT)({repoName:o.repositoryOrigin.repositoryName,repoLocation:o.repositoryOrigin.repositoryLocationName,pipelineName:o.pipelineName,isJob:(0,z.E8)(r,o.pipelineName),path:"/partitions?partitionSet=".concat(encodeURIComponent(o.name))}),children:o.name}):a?(0,i.jsx)("span",{style:{fontWeight:500},children:a}):null,(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:[n?(0,i.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{fontSize:"12px"},children:[(0,i.jsx)(d.JO,{name:"repo",color:l.$()}),(0,i.jsx)(x.rU,{to:(0,M.$U)(n),children:(0,F.Uz)(n)})]}):void 0,(null==s?void 0:s.length)?(0,i.jsx)(I.h,{assetKeys:s,dialogTitle:"Assets in backfill"}):o&&r?(0,i.jsx)(T.h,{showIcon:!0,size:"small",pipelineName:o.pipelineName,pipelineHrefContext:{name:o.repositoryOrigin.repositoryName,location:o.repositoryOrigin.repositoryLocationName},isJob:(0,z.E8)(r,o.pipelineName)}):null]})]})},V=e=>{let{allPartitions:t,backfill:n,onExpand:r}=e,{partitionNames:s,numPartitions:o}=n;if(null===o)return(0,i.jsx)("span",{});let l="".concat(o.toLocaleString()," ").concat(1===o?"partition":"partitions");return(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},children:[(0,i.jsx)("div",{children:s?(0,i.jsx)(Y,{onClick:r,children:(0,i.jsx)(u.V,{intent:"primary",interactive:!0,children:l})}):(0,i.jsx)(u.V,{intent:"primary",children:l})}),t&&s&&(0,i.jsx)(J,{all:t,requested:s})]})},J=e=>{let{all:t,requested:n}=e,r=m.useMemo(()=>({runStatusForPartitionKey:e=>n&&n.includes(e)?k.VOA.QUEUED:k.VOA.NOT_STARTED}),[n]);return(0,i.jsx)(E.b,{small:!0,hideStatusTooltip:!0,partitionNames:t,health:r})},Q=e=>{let{backfill:t,counts:n}=e;if(t.isAssetBackfill)return(0,i.jsx)(v.w,{backfill:t});switch(t.status){case k.Jv3.REQUESTED:return(0,i.jsx)(u.V,{children:"In progress"});case k.Jv3.FAILED:return(0,i.jsx)(c.x,{margin:{bottom:12},children:(0,i.jsx)(Y,{onClick:()=>t.error&&(0,y._K)({title:"Error",body:(0,i.jsx)(S.T9,{error:t.error})}),children:(0,i.jsx)(u.V,{intent:"danger",children:"Failed"})})});case k.Jv3.COMPLETED:if(null===t.partitionNames)return(0,i.jsx)(u.V,{intent:"success",children:"Completed"});if(!n)return(0,i.jsx)("div",{style:{color:l.$()},children:"None"});if(n[k.VOA.SUCCESS]===t.partitionNames.length)return(0,i.jsx)(u.V,{intent:"success",children:"Completed"});if(Array.from(P.Ys).some(e=>n[e]))return(0,i.jsx)(u.V,{intent:"primary",children:"In progress"});return(0,i.jsx)(u.V,{intent:"warning",children:"Incomplete"});case k.Jv3.CANCELING:return(0,i.jsx)(u.V,{children:"Canceling"});case k.Jv3.CANCELED:return(0,i.jsx)(u.V,{children:"Canceled"})}return(0,i.jsx)("span",{})},Y=f.ZP.button.withConfig({componentId:"sc-ac2bd124-0"})(["border:none;background:none;cursor:pointer;padding:0;margin:0;:focus{outline:none;}"]),G=(0,o.Ps)(L()),W=(0,o.Ps)($())},32959:function(e,t,n){n.d(t,{w:function(){return d}});var r=n(52322),i=n(14934),s=n(43212),o=n(35505),l=n(8068),a=n(23399),c=n(88257);let d=e=>{let{backfill:t}=e,{status:n,error:o}=t;function d(e){return(0,r.jsx)(i.x,{margin:{bottom:12},children:(0,r.jsx)(u,{onClick:()=>o&&(0,l._K)({title:"Error",body:(0,r.jsx)(a.T9,{error:o})}),children:(0,r.jsx)(s.V,{intent:"danger",children:e})})})}switch(n){case c.Jv3.REQUESTED:return(0,r.jsx)(s.V,{children:"In progress"});case c.Jv3.CANCELING:return d("Canceling");case c.Jv3.CANCELED:return d("Canceled");case c.Jv3.FAILED:return d("Failed");case c.Jv3.COMPLETED:return(0,r.jsx)(s.V,{intent:"success",children:"Completed"});default:return(0,r.jsx)(s.V,{children:n})}},u=o.ZP.button.withConfig({componentId:"sc-b7ae553d-0"})(["border:none;background:none;cursor:pointer;padding:0;margin:0;:focus{outline:none;}"])},90731:function(e,t,n){n.d(t,{b:function(){return S},G:function(){return y}});var r=n(73235),i=n(52322),s=n(89130),o=n(1747),l=n(2784),a=n(84927),c=n(92506),d=n(74188),u=n(38491),h=n(90483),p=n(81732);let m=new Intl.Collator(navigator.language,{sensitivity:"base",numeric:!0}),x=e=>{let{backfill:t,onClose:n}=e;return(0,i.jsxs)(c.Vq,{isOpen:!!t,title:(0,i.jsxs)("span",{children:["Partitions requested for backfill:"," ",(0,i.jsx)("span",{style:{fontSize:"16px",fontFamily:d.b.monospace},children:null==t?void 0:t.id})]}),onClose:n,children:[(0,i.jsx)(g,{partitionNames:(null==t?void 0:t.partitionNames)||[]}),(0,i.jsx)(c.cN,{topBorder:!0,children:(0,i.jsx)(u.zx,{onClick:n,children:"Done"})})]})},g=e=>{let{partitionNames:t}=e,n=(0,l.useMemo)(()=>[...t||[]].sort((e,t)=>m.compare(e,t)),[t]);return(0,i.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,i.jsx)(p.Y,{items:n,renderItem:e=>(0,i.jsx)("div",{children:(0,i.jsx)(h.rd,{text:e})},e)})})};var f=n(94655),j=n(78491);function v(){let e=(0,r._)(["\n  fragment BackfillTableFragment on PartitionBackfill {\n    id\n    status\n    isAssetBackfill\n    isValidSerialization\n    partitionNames\n    numPartitions\n    timestamp\n    partitionSetName\n    partitionSet {\n      id\n      ...PartitionSetForBackfillTable\n    }\n    assetSelection {\n      path\n    }\n    tags {\n      key\n      value\n    }\n    error {\n      ...PythonErrorFragment\n    }\n    ...BackfillActionsBackfillFragment\n  }\n\n  fragment PartitionSetForBackfillTable on PartitionSet {\n    id\n    name\n    mode\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n  }\n\n  ","\n  ","\n"]);return v=function(){return e},e}let y=e=>{let{showBackfillTarget:t=!0,allPartitions:n,backfills:r,refetch:s}=e,[a,c]=(0,l.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Backfill ID"}),(0,i.jsx)("th",{children:"Created"}),t?(0,i.jsx)("th",{children:"Backfill target"}):null,(0,i.jsx)("th",{children:"Requested"}),(0,i.jsx)("th",{children:"Launched by"}),(0,i.jsx)("th",{children:"Backfill status"}),(0,i.jsx)("th",{children:"Run status"}),(0,i.jsx)("th",{style:{width:80}})]})}),(0,i.jsx)("tbody",{children:r.map(e=>(0,i.jsx)(f.FW,{showBackfillTarget:t,backfill:e,allPartitions:n,onShowPartitionsRequested:c,refetch:s},e.id))})]}),(0,i.jsx)(x,{backfill:a,onClose:()=>c(void 0)})]})},S=(0,s.Ps)(v(),j.B,a.V2)},59502:function(e,t,n){n.d(t,{p:function(){return k}});var r=n(52322),i=n(39013),s=n(60129),o=n(35292),l=n(35002),a=n(40191),c=n(28879),d=n.n(c),u=n(77491),h=n.n(u),p=n(30733),m=n.n(p),x=n(2784),g=n(35505),f=n(57758),j=n(68903),v=n(72045),y=n(88257);d().extend(h());let S={[y.izS.SUCCESS]:i.fA(),[y.izS.FAILURE]:i.FY(),[y.izS.STARTED]:i.v4(),[y.izS.SKIPPED]:i.A8()},b={[y.izS.SUCCESS]:i.Lv(),[y.izS.FAILURE]:i.MP(),[y.izS.STARTED]:i.Jq(),[y.izS.SKIPPED]:i.$l()},w=m()(e=>new Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Automatic"===e?(0,v.cw)():e,timeZoneName:"short"})),k=e=>{let{ticks:t,onHoverTick:n,onSelectTick:i,exactRange:a,timeRange:c=3e5,tickGrid:d=6e4,timeAfter:u=6e4}=e,[h,p]=(0,x.useState)(Date.now()),[m,g]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!m&&!a){let e=setInterval(()=>{p(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[a,m]);let v=(null==a?void 0:a[1])?1e3*a[1]:h+u,y=(null==a?void 0:a[0])?1e3*a[0]:h-c,S=v-y,{viewport:b,containerProps:k}=(0,s.S)(),O=(0,x.useMemo)(()=>t.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>y).reverse(),[t,y]),_=(0,x.useMemo)(()=>O.map((e,t)=>{var n,r;let i=(n=1e3*e.timestamp,b.width*(n-y)/S),s=(r=(0,f.g6)(e,O.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:h,b.width*(r-y)/S);return{...e,width:Math.max(s-i,8),startX:i}}),[y,h,O,S,b.width]),z=Math.max((v-y)/25,d),D=z/5,F=Math.ceil(y/D)*D,M=(0,x.useMemo)(()=>{let e=[];for(let n=F;n<=v;n+=D){var t;e.push({time:n,x:(t=n,b.width*(t-y)/S),showLabel:n%z==0})}return e},[v,F,D,b.width,y,S,z]),{timezone:[L]}=(0,x.useContext)(j.JB);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...k,children:[(0,r.jsxs)(C,{children:[M.map(e=>(0,r.jsxs)(N,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,r.jsx)(P,{}),e.showLabel?(0,r.jsx)(R,{children:(0,r.jsx)(o.YS,{children:w(L).format(new Date(e.time))})}):null]},e.time)),_.map(e=>{var t,s;let o=null!==(s="requestedAssetMaterializationCount"in e?e.requestedAssetMaterializationCount:null===(t=e.runIds)||void 0===t?void 0:t.length)&&void 0!==s?s:0;return(0,r.jsx)(I,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{n(e),g(!0)},onMouseLeave:()=>{n(),g(!1)},onClick:()=>{i(e)},children:(0,r.jsx)(l.u,{content:(0,r.jsx)(E,{tick:e}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),(0,r.jsx)(A,{style:{transform:"translateX(".concat(b.width*(h-y)/S,"px)")}})]}),(0,r.jsx)(T,{})]})})},E=(0,x.memo)(e=>{let{tick:t}=e,n=(0,x.useMemo)(()=>{var e,n;return t.status===y.izS.FAILURE?"Evaluation failed":t.status===y.izS.STARTED?"Evaluating…":"requestedAssetMaterializationCount"in t?"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,a.I)(t.requestedAssetMaterializationCount,"","s")," requested"):"".concat((null===(e=t.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(n=t.runs)||void 0===n?void 0:n.length,"","s")," requested")},[t]),s=d()(1e3*t.timestamp),l=d()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),c=s.to(l,!0);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.YS,{as:"div",children:[n," (",c,")"]}),t.status===y.izS.STARTED?null:(0,r.jsx)(o.YS,{color:i.$(),children:"Click for details"})]})}),C=g.ZP.div.withConfig({componentId:"sc-44a8a894-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],i.wL()),T=g.ZP.div.withConfig({componentId:"sc-44a8a894-1"})(["height:24px;"]),I=g.ZP.div.withConfig({componentId:"sc-44a8a894-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],i.v8(),e=>{let{status:t}=e;return"\n    background: ".concat(S[t],";\n    &:hover {\n      background: ").concat(b[t],";\n    }\n  ")}),N=g.ZP.div.withConfig({componentId:"sc-44a8a894-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),P=g.ZP.div.withConfig({componentId:"sc-44a8a894-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],i.wL()),R=g.ZP.div.withConfig({componentId:"sc-44a8a894-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),A=g.ZP.div.withConfig({componentId:"sc-44a8a894-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],i.Bj(),i.Bj(),i.KH())},9790:function(e,t,n){n.d(t,{C:function(){return Z},H:function(){return K}});var r=n(73235),i=n(52322);n(84678);var s=n(40794),o=n(89130),l=n(14934),a=n(79106),c=n(37483),d=n(37504),u=n(80122),h=n(35292),p=n(74188),m=n(92917),x=n(89891),g=n(40191),f=n(39013),j=n(1747),v=n(65511),y=n(42418),S=n(2784),b=n(35505),w=n(77837),k=n(581),E=n(59502),C=n(44030),T=n(57758),I=n(50309),N=n(78491),P=n(23399),R=n(16336),A=n(85227),O=n(88257),_=n(4378),z=n(34219),D=n(2278),F=n(15332),M=n(86269),L=n(57397),$=n(58905),q=n(20718);function U(){let e=(0,r._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return U=function(){return e},e}v.kL.register(y.ZP);let B={[O.izS.SUCCESS]:!0,[O.izS.FAILURE]:!0,[O.izS.STARTED]:!0,[O.izS.SKIPPED]:!0},H={[O.izS.SUCCESS]:"Requested",[O.izS.FAILURE]:"Failed",[O.izS.STARTED]:"In progress",[O.izS.SKIPPED]:"Skipped"},K=e=>{var t;let{name:n,repoAddress:r,tabs:s,setTimerange:o,setParentStatuses:h}=e,[p,m]=(0,_.q)({encode:e=>{let t={};return Object.keys(e).map(n=>{t[n.toLowerCase()]=String(e[n])}),t},decode:e=>{let t={...B};return Object.keys(B).forEach(n=>{n.toLowerCase() in e&&(t[n]="false"!==e[n.toLowerCase()])}),t}}),x={...(0,q.$)(r),name:n},g=S.useMemo(()=>Object.keys(p).filter(e=>p[e]).map(e=>e),[p]),{queryResult:f,paginationProps:j}=(0,F.l)({nextCursorForResult:e=>{var t;if("InstigationState"===e.instigationStateOrError.__typename)return null===(t=e.instigationStateOrError.ticks[24])||void 0===t?void 0:t.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:x,statuses:g},query:J,pageSize:25});(0,z.Hu)(f,"TickHistoryQuery"),(0,R.C4)(f,R.dT);let v=null==f?void 0:null===(t=f.data)||void 0===t?void 0:t.instigationStateOrError,y=S.useMemo(()=>(null==v?void 0:v.__typename)==="InstigationState"?v.ticks:[],[v]);S.useEffect(()=>{if(j.hasPrevCursor){if(y&&y.length){var e,t;let n=null===(e=y[y.length-1])||void 0===e?void 0:e.timestamp,r=null===(t=y[0])||void 0===t?void 0:t.endTimestamp;n&&r&&(null==o||o([n,r]))}}else null==o||o(void 0)},[j.hasPrevCursor,y,o]),S.useEffect(()=>{j.hasPrevCursor?null==h||h(Array.from(g)):null==h||h(void 0)},[j.hasPrevCursor,h,g]),S.useEffect(()=>{!j.hasPrevCursor||y.length||f.loading||j.reset()},[y,f.loading,j.hasPrevCursor]);let[b,w]=S.useState(),{data:k}=f;if(!k)return(0,i.jsx)(l.x,{padding:{vertical:48},children:(0,i.jsx)(a.$,{purpose:"page"})});if("PythonError"===k.instigationStateOrError.__typename)return(0,i.jsx)(P.T9,{error:k.instigationStateOrError});if("InstigationStateNotFoundError"===k.instigationStateOrError.__typename)return(0,i.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:E}=k.instigationStateOrError;if(!y.length&&g.length===Object.keys(B).length)return null;let C=e=>{let{status:t}=e;return(0,i.jsx)(d.X,{label:H[t],checked:p[t],onChange:e=>{m({...p,[t]:e.target.checked})}})};return(0,i.jsxs)(i.Fragment,{children:[b?(0,i.jsx)(L.l,{tick:b,instigationSelector:x,onClose:()=>w(void 0)}):null,(0,i.jsx)(l.x,{padding:{vertical:8,horizontal:24},children:(0,i.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[s,(0,i.jsxs)(l.x,{flex:{direction:"row",gap:16},children:[(0,i.jsx)(C,{status:O.izS.STARTED}),(0,i.jsx)(C,{status:O.izS.SUCCESS}),(0,i.jsx)(C,{status:O.izS.FAILURE}),(0,i.jsx)(C,{status:O.izS.SKIPPED})]})]})}),y.length?(0,i.jsxs)(Y,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,i.jsx)("th",{style:{width:90},children:"Status"}),(0,i.jsx)("th",{style:{width:90},children:"Duration"}),E===O._5b.SENSOR?(0,i.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,i.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,i.jsx)("tbody",{children:y.map((e,t)=>(0,i.jsx)(V,{tick:e,instigationSelector:x,index:t},e.id))})]}):(0,i.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,i.jsx)(c.t,{icon:"no-results",title:"No ticks to display"})}),y.length>0?(0,i.jsx)("div",{style:{marginTop:"16px"},children:(0,i.jsx)(u.pI,{...j})}):null]})},Z=e=>{let{name:t,repoAddress:n,onHighlightRunIds:r,beforeTimestamp:o,afterTimestamp:c,statuses:d}=e,[u,p]=(0,_.q)({encode:e=>({tickId:e}),decode:e=>e.tickId?Number(e.tickId):void 0}),[m,x]=S.useState(!1),g={...(0,q.$)(n),name:t},f=(0,s.a)(J,{variables:{instigationSelector:g,beforeTimestamp:o,afterTimestamp:c,statuses:d,limit:o?void 0:15},notifyOnNetworkStatusChange:!0});(0,z.Hu)(f,"TickHistoryQuery"),(0,R.C4)(f,1e3,!(m||o&&c));let{data:j,error:v}=f;if(!j||v)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,i.jsx)(h.pm,{children:"Recent ticks"})}),(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===j.instigationStateOrError.__typename)return(0,i.jsx)(P.T9,{error:j.instigationStateOrError});if("InstigationStateNotFoundError"===j.instigationStateOrError.__typename)return null;let{ticks:y=[]}=j.instigationStateOrError,b=e=>{p(e?Number(e.tickId):void 0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.X,{isOpen:!!u,tickId:u,instigationSelector:g,onClose:()=>b(void 0)}),(0,i.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,i.jsx)(h.pm,{children:"Recent ticks"})}),(0,i.jsx)(l.x,{border:"top",children:(0,i.jsx)(E.p,{ticks:y,onHoverTick:e=>{e||x(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),x(!0))},onSelectTick:b,exactRange:o&&c?[c,o]:void 0})})]})};function V(e){let{tick:t,instigationSelector:n,index:r}=e,s=(0,A.m)(),[o,a]=S.useState(!1),[c,d]=S.useMemo(()=>{let e=t.dynamicPartitionsRequestResults;return[(0,T.sw)(e,O.Dq2.ADD_PARTITIONS),(0,T.sw)(e,O.Dq2.DELETE_PARTITIONS)]},[null==t?void 0:t.dynamicPartitionsRequestResults]),u=(0,T.g6)(t,r);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(M.v,{timestamp:t.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,i.jsx)("td",{children:(0,i.jsx)($.a,{tick:t,isStuckStarted:u})}),(0,i.jsx)("td",{children:u?"- ":(0,i.jsx)(D.Q,{startUnix:t.timestamp,endUnix:t.endTimestamp||Date.now()/1e3})}),t.instigationType===O._5b.SENSOR?(0,i.jsx)("td",{style:{width:120},children:t.cursor?(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,i.jsx)("div",{style:{fontFamily:p.b.monospace,fontSize:"14px"},children:(0,T.$G)(t.cursor||"")}),(0,i.jsx)(Q,{onClick:async()=>{s(t.cursor||""),await (0,I.B7)({message:(0,i.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,i.jsx)(m.JO,{name:"assignment"})})]}):(0,i.jsx)(i.Fragment,{children:"—"})}):null,(0,i.jsx)("td",{children:(0,i.jsxs)(l.x,{flex:{direction:"column",gap:6},children:[(0,i.jsxs)(l.x,{flex:{alignItems:"center",gap:8},children:[(0,i.jsx)(x.Z,{onClick:()=>{a(!0)},children:1===t.runIds.length?"1 run requested":"".concat(t.runIds.length," runs requested")}),1===t.runs.length?t.runs.map(e=>(0,i.jsx)(S.Fragment,{children:(0,i.jsx)(k.RX,{run:e})},e.id)):null]}),c||d?(0,i.jsxs)(h.YS,{children:["(",c?(0,i.jsxs)("span",{children:[c," partition",(0,g.I)(c,"","s")," created",d?",":""]}):null,d?(0,i.jsxs)("span",{children:[d," partition",(0,g.I)(d,"","s")," deleted,"]}):null,")"]}):null,(0,i.jsx)(C.X,{isOpen:o,tickId:Number(t.tickId),instigationSelector:n,onClose:()=>{a(!1)}})]})})]})}let J=(0,o.Ps)(U(),k.S9,N.B,w.dY,k.vw),Q=b.ZP.button.withConfig({componentId:"sc-a8fb3695-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],m.a1,f.md(),m.a1,f.$l(),m.a1,f.Es()),Y=(0,b.ZP)(j.i).withConfig({componentId:"sc-a8fb3695-1"})(["th,td{vertical-align:middle !important;}"])},77044:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(88257);let i=e=>e.hasStartPermission&&e.status===r.ynu.STOPPED||e.hasStopPermission&&e.status===r.ynu.RUNNING},69557:function(e,t,n){n.d(t,{H:function(){return i}});var r=n(88257);let i=e=>{let t=!1,n=!1;for(let i of e){let{status:e}=i;if(e===r.ynu.RUNNING?n=!0:e===r.ynu.STOPPED&&(t=!0),n&&t)break}return{anyOff:t,anyOn:n}}},54724:function(e,t,n){n.d(t,{s:function(){return o}});var r=n(2784);let i={step:"initial",completion:{completed:0,errors:{}}},s=(e,t)=>{switch(t.type){case"reset":return i;case"start":return{...e,step:"updating"};case"update-success":{let{completion:t}=e;return{step:"updating",completion:{...t,completed:t.completed+1}}}case"update-error":{let{completion:n}=e;return{step:"updating",completion:{...n,completed:n.completed+1,errors:{...n.errors,[t.name]:t.error}}}}case"complete":return{...e,step:"completed"}}},o=()=>(0,r.useReducer)(s,i)},57758:function(e,t,n){n.d(t,{$G:function(){return i},g6:function(){return s},sw:function(){return o}});var r=n(88257);let i=e=>e.length>100?"".concat(e.slice(0,95),"…"):e;function s(e,t){return!e.endTimestamp&&(0!==t&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function o(e,t){return e.reduce((e,n)=>{if(n.type===t){var r;return e+((null===(r=n.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},22921:function(e,t,n){n.d(t,{y:function(){return r}});let r="overview-collapsed-state"},71291:function(e,t,n){n.d(t,{ac:function(){return q},ux:function(){return B},Rc:function(){return L}});var r=n(73235),i=n(52322),s=n(40794),o=n(89130),l=n(60129),a=n(92506),c=n(14934),d=n(38491),u=n(53664),h=n(92917),p=n(39013),m=n(55010),x=n(60603),g=n(2784),f=n(35505),j=n(79106),v=n(37483),y=n(78491),S=n(34219),b=n(89010),w=n(43984);function k(){let e=(0,r._)(["\n  query PartitionRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return k=function(){return e},e}let E=e=>{let t=(0,s.a)(C,{variables:{filter:{pipelineName:e.pipelineName,tags:[{key:w.H.Partition,value:e.partitionName}]}}});(0,S.Hu)(t,"PartitionRunListQuery");let{data:n,loading:r}=t;return r||!n?(0,i.jsx)(j.$,{purpose:"section"}):"Runs"!==n.pipelineRunsOrError.__typename?(0,i.jsx)(v.t,{icon:"error",title:"Query Error",description:n.pipelineRunsOrError.message}):(0,i.jsx)("div",{children:(0,i.jsx)(b.AL,{runs:n.pipelineRunsOrError.results})})},C=(0,o.Ps)(k(),b.ZZ,y.B);var T=n(95590),I=n(34925),N=n(44900),P=n(65470),R=n(65152),A=n(27052),O=n(77432),_=n(88257),z=n(33182),D=n(43),F=n(20718);function M(){let e=(0,r._)(["\n  query PartitionStepStatusPipelineQuery($pipelineSelector: PipelineSelector) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          ...PartitionMatrixSolidHandleFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return M=function(){return e},e}let L=e=>Math.ceil(e/T.Bj)-3,$=e=>{let[t,n]=[Date.now()/1e3,1];for(let r of e)for(let e of r.steps)0!==e.unix&&([t,n]=[Math.min(t,e.unix),Math.max(n,e.unix)]);return[t,n]},q=g.memo(e=>{let{assetHealth:t,rangeDimension:n,rangeDimensionIdx:r,assetQueryItems:s,...o}=e,l=(0,g.useMemo)(()=>{let e={};for(let s of t){var i;if((null===(i=s.dimensions[r])||void 0===i?void 0:i.name)!==n.name)continue;let t=s.rangesForSingleDimension(r);e[(0,N.Je)(s.assetKey)]=t}return e},[t,n.name,r]),a=(0,g.useMemo)(()=>(0,O.tc)({nodes:s,mode:A.hS.FLAT}).boxes.filter(e=>!!l[e.node.name]),[s,l]),c=(0,g.useMemo)(()=>({stepRows:a.map(e=>({x:e.x,name:e.node.name,totalFailurePercent:0,finalFailurePercent:0})),partitions:[],partitionColumns:n.partitionKeys.map((e,t)=>({idx:t,name:e,runsLoaded:!0,runs:[],steps:a.map(e=>({name:e.node.name,unix:0,color:U((0,R.h1)(l[e.node.name],t))}))}))}),[a,n.partitionKeys,l]);return(0,i.jsx)(H,{...o,partitionNames:n.partitionKeys,data:c,showLatestRun:!1})}),U=e=>e.includes(P.yo.MATERIALIZED)&&e.includes(P.yo.MISSING)?"SUCCESS-MISSING":e.includes(P.yo.MATERIALIZED)?"SUCCESS":e.includes(P.yo.FAILED)&&e.includes(P.yo.MISSING)?"FAILURE-MISSING":e.includes(P.yo.FAILED)?"FAILURE":"MISSING",B=g.memo(e=>{var t;let{repoAddress:n,pipelineName:r,partitions:o,partitionNames:l,...a}=e,c={...(0,F.$)(n),pipelineName:r},d=(0,s.a)(J,{variables:{pipelineSelector:c},fetchPolicy:"no-cache"});(0,S.Hu)(d,"PartitionStepStatusPipelineQuery");let u=(null===(t=d.data)||void 0===t?void 0:t.pipelineSnapshotOrError.__typename)==="PipelineSnapshot"&&d.data.pipelineSnapshotOrError.solidHandles,h=(0,I.J2)((0,g.useMemo)(()=>({partitionNames:l,partitions:o,stepQuery:"",solidHandles:u}),[l,o,u]));return h?(0,i.jsx)(H,{...a,showLatestRun:!0,pipelineName:r,partitionNames:l,data:h}):(0,i.jsx)("span",{})}),H=g.memo(e=>{let{viewport:t,containerProps:n}=(0,l.S)(),[r,s]=(0,g.useState)(null),[o,p]=(0,g.useState)(null),{setPageSize:m,data:x}=e;(0,g.useEffect)(()=>{t.width&&m(L(t.width))},[t.width,m]);let{stepRows:f,partitionColumns:j}=x,v=e=>{let t={};return e.forEach(e=>t[e.name]=e),f.map(e=>t[e.name])},y=L(t.width),S=Math.max(0,j.length-e.offset-y),b=Math.max(y,j.length-e.offset),w=(0,g.useMemo)(()=>j.slice(S,b),[j,b,S]),[k,C]=(0,g.useMemo)(()=>$(j),[j]),I=(0,g.useMemo)(()=>(0,T.G3)(j.map(e=>e.name)),[j]);return(0,i.jsxs)(Z,{children:[(0,i.jsxs)(a.Vq,{isOpen:!!o,onClose:()=>p(null),style:{width:"90vw"},title:o?"".concat(o.partitionName," runs"):"",children:[(0,i.jsx)(c.x,{padding:{bottom:12},children:o&&(0,i.jsx)(E,{pipelineName:e.pipelineName,partitionName:o.partitionName})}),(0,i.jsx)(a.cN,{children:(0,i.jsx)(d.zx,{intent:"primary",autoFocus:!0,onClick:()=>p(null),children:"OK"})})]}),(0,i.jsxs)("div",{style:{position:"relative",display:"flex"},children:[(0,i.jsx)(T.NF,{floating:e.offset+y<e.partitionNames.length,children:(0,i.jsxs)(T.C4,{disabled:!0,style:{flex:1,flexShrink:1,overflow:"hidden"},children:[(0,i.jsx)(T.eh,{style:{height:I}}),e.showLatestRun&&(0,i.jsx)(T.p$,{style:{paddingLeft:24},children:"Last Run"}),(0,i.jsx)(V,{}),f.map(e=>(0,i.jsx)(T.p$,{style:{paddingLeft:8+e.x,paddingRight:8},"data-tooltip":e.name,hovered:e.name===(null==r?void 0:r.stepName),children:(0,i.jsx)(u.g,{text:e.name})},e.name))]})}),e.offset+y<e.partitionNames.length?(0,i.jsx)(K,{$direction:"left",onClick:()=>e.setOffset(Math.max(0,Math.min(e.offset+y-1,e.partitionNames.length-y))),children:(0,i.jsx)(h.JO,{name:"chevron_left"})}):null,(0,i.jsx)("div",{style:{flex:1,overflow:"hidden",position:"relative"},...n,children:(0,i.jsx)("div",{style:{width:j.length*T.Bj,position:"absolute",height:"100%",right:0,zIndex:1},children:w.map((t,n)=>(0,i.jsxs)(T.C4,{style:{zIndex:w.length-n,width:T.Bj,position:"absolute",right:(y-n)*T.Bj+20},children:[(0,i.jsx)(T.kD,{$height:I,label:t.name}),e.showLatestRun&&(0,i.jsx)(T.p$,{style:{textAlign:"center"},children:(0,i.jsx)(Y,{runs:t.runs,runsLoaded:t.runsLoaded,minUnix:k,maxUnix:C,hovered:r,setHovered:s,setFocused:p,partitionName:t.name},"".concat(t.name,":__full_status"))}),(0,i.jsx)(V,{}),v(t.steps).map(e=>(0,i.jsx)(Y,{step:e,runs:t.runs,runsLoaded:t.runsLoaded,minUnix:k,maxUnix:C,hovered:r,setHovered:s,setFocused:p,partitionName:t.name},e.name))]},t.name))})}),e.offset>0?(0,i.jsx)(K,{$direction:"right",onClick:()=>e.setOffset(Math.max(0,e.offset-y)),children:(0,i.jsx)(h.JO,{name:"chevron_right"})}):null]})]})}),K=f.ZP.div.withConfig({componentId:"sc-88170e7a-0"})(["width:30px;position:absolute;border:1px solid ",";border-radius:3px;display:flex;justify-content:center;align-items:center;top:calc(50% - 15px);bottom:calc(50% - 15px);"," background:",";z-index:10;justify-content:center;align-items:center;cursor:pointer;display:flex;&:hover{background:",";}"],p.wL(),e=>{let{$direction:t}=e;return"left"===t?"left: 315px;":"right: 0;"},p.v8(),p.Z$()),Z=f.ZP.div.withConfig({componentId:"sc-88170e7a-1"})(["display:block;"]),V=f.ZP.div.withConfig({componentId:"sc-88170e7a-2"})(["height:1px;width:100%;margin-top:5px;border-top:1px solid ",";"],p.wL()),J=(0,o.Ps)(M(),I.Tg),Q=JSON.stringify({top:20,left:10}),Y=g.memo(e=>{let t,{step:n,runs:r,runsLoaded:s,hovered:o,setHovered:l,setFocused:a,partitionName:c}=e,[d,u]=(0,g.useState)(!1);if(s){if(n)t=n.color.toLowerCase();else if(0===r.length)t="empty";else{var h;let e=null===(h=[...r].reverse().find(e=>e.status!==_.VOA.CANCELED))||void 0===h?void 0:h.status;t=e?e.toLowerCase():"empty"}}else t="loading";let p=(0,i.jsx)("div",{className:"square ".concat(t),onMouseEnter:()=>l({stepName:null==n?void 0:n.name,partitionName:c}),onMouseLeave:()=>l(null),"data-tooltip":s&&!n?1===r.length?"1 run":"".concat(r.length," runs"):void 0,"data-tooltip-style":Q});return d||r.length&&(null==o?void 0:o.stepName)===(null==n?void 0:n.name)&&(null==o?void 0:o.partitionName)===c?(0,i.jsx)(m.J,{interactionKind:"click",placement:"bottom-start",onOpening:()=>u(!0),onClosed:()=>u(!1),content:(0,i.jsxs)(x.v2,{children:[(0,i.jsx)(D.U,{icon:"open_in_new",text:"Show logs from last run",to:(0,z.tA)(r[r.length-1],{stepKey:n?n.name:null})}),(0,i.jsx)(x.sN,{icon:"settings_backup_restore",text:"View runs (".concat(r.length,")"),onClick:()=>a({stepName:null==n?void 0:n.name,partitionName:c})})]}),children:p}):p})},95590:function(e,t,n){n.d(t,{AQ:function(){return g},Bj:function(){return o},C4:function(){return d},G3:function(){return p},NF:function(){return f},eh:function(){return h},kD:function(){return m},p$:function(){return u}});var r=n(52322),i=n(39013),s=n(35505);let o=32,l={SUCCESS:i.fA(),SUCCESS_SKIPPED:i.Lv(),FAILURE:i.FY(),FAILURE_SKIPPED:i.MP(),SKIPPED:i.qr(),IN_PROGRESS:i.L$()},a=e=>"linear-gradient(to left, ".concat(e," 0%, ").concat(e," 100%)"),c=e=>e.map(a).join(","),d=s.ZP.div.withConfig({componentId:"sc-519f33a1-0"})(["display:flex;flex-direction:column;flex-shrink:0;line-height:0;"," "," "," "," .cell{height:","px;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:12px;padding:2px;box-sizing:border-box;line-height:initial;}.square{width:20px;height:20px;margin:6px;display:inline-block;&:hover:not(.empty):before{box-shadow:"," 0 0 0 3px;}&:before{content:' ';background:",";border-radius:10px;display:inline-block;width:20px;height:20px;}&.loading{&:before{background:radial-gradient( "," 0%,"," 45%,"," 60% );}}&.success{&:before{background:",";}}&.failure{&:before{background:",";}}&.success-missing{&:before{background:",";}}&.failure-missing{&:before{background:",";}}&.failure-blank{&:before{background:",";}}&.skipped{&:before{background:",";}}&.started,&.starting,&.canceling{&:before{background:",";}}}"],e=>{let{disabled:t,focused:n,multiselectFocused:r,hovered:s}=e;return!t&&!n&&!r&&"&".concat(s?"":":hover"," {\n      background: ").concat(i.Z$(),";\n      cursor: default;\n      ").concat(x," {\n        background: ").concat(i.Z$(),";\n        .tilted {\n          background: ").concat(i.gJ(),";\n        }\n      }\n      .square {\n        filter: brightness(95%);\n      }\n    }")},e=>{let{disabled:t}=e;return t&&"\n      ".concat(x," {\n        color: ").concat(i.$(),"\n      }\n    ")},e=>{let{focused:t}=e;return t&&"background: ".concat(i.L$(),";\n    ").concat(u," {\n      color: ").concat(i.KH(),";\n    }\n    ").concat(x," {\n      background: ").concat(i.Bj(),";\n      color: ").concat(i.KH(),";\n      .tilted {\n        background: ").concat(i.L$(),";\n      }\n    }\n  }")},e=>{let{multiselectFocused:t}=e;return t&&"background: ".concat(i.U9(),";\n    ").concat(u," {\n      color: ").concat(i.KH(),";\n    }\n    ").concat(x," {\n      background: ").concat(i.Bj(),";\n      color: ").concat(i.KH(),";\n      .tilted {\n        background: ").concat(i.U9(),";\n      }\n    }\n  }")},o,i.L$(),i.md(),i.wc(),i.wc(),i.Yj(),l.SUCCESS,l.FAILURE,l.SUCCESS_SKIPPED,l.FAILURE_SKIPPED,l.FAILURE_SKIPPED,l.SKIPPED,l.IN_PROGRESS),u=s.ZP.div.withConfig({componentId:"sc-519f33a1-1"})(["height:","px;line-height:","px;font-size:13px;overflow:hidden;text-overflow:ellipsis;position:relative;background:",";"],o,o,e=>{let{hovered:t}=e;return c([t?i.gJ():"transparent"])}),h=s.ZP.div.withConfig({componentId:"sc-519f33a1-2"})(["position:relative;height:70px;padding:4px;padding-bottom:0;min-width:15px;align-items:flex-end;display:flex;"]);function p(e){let t=0;for(let n of e)t=Math.max(t,n.length);return(t>10?4.9*t:55)+15}let m=e=>{let{label:t,$height:n}=e;return(0,r.jsx)(x,{style:{height:n-15},children:(0,r.jsx)("div",{className:"tilted",children:t})})},x=s.ZP.div.withConfig({componentId:"sc-519f33a1-3"})(["position:relative;height:unset;padding:4px;padding-bottom:0;min-width:15px;margin-bottom:","px;align-items:end;display:flex;line-height:normal;& > div.tilted{font-size:12px;white-space:nowrap;position:absolute;bottom:-20px;left:0;padding:2px;padding-right:4px;padding-left:0;transform:rotate(-","deg);transform-origin:top left;}"],15,41),g=330,f=s.ZP.div.withConfig({componentId:"sc-519f33a1-4"})(["display:flex;border-right:1px solid ",";padding-bottom:16px;width:","px;z-index:1;",";"],i.im(),g,e=>{let{floating:t}=e;return t?"box-shadow: 1px 0 4px rgba(0, 0, 0, 0.15)":""})},34925:function(e,t,n){n.d(t,{Tg:function(){return w},iv:function(){return b},J2:function(){return S}});var r=n(73235),i=n(89130),s=n(98832),o=n(13549),l=n(77432),a=n(88257),c=n(2784),d=n(28316);let u=(0,c.createContext)((()=>{let e=!1,t=[];return{enqueue:n=>{t.push(n),e||(e=!0,setTimeout(()=>{(0,d.unstable_batchedUpdates)(()=>{for(;t.length;)t.shift()();e=!1})},200))}}})()),h=(e,t,n)=>{let[r,i]=(0,c.useState)(e),s=(0,c.useRef)(Date.now()),o=(0,c.useRef)(null),{enqueue:l}=(0,c.useContext)(u);return(0,c.useEffect)(()=>{let t=!1,r=Date.now();return r-s.current>=n?(l(()=>{i(e)}),s.current=r):(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l(()=>{t||i(e)}),s.current=Date.now()},n-(r-s.current))),()=>{t=!0,o.current&&clearTimeout(o.current)}},t),r};var p=n(67126),m=n(17298);function x(){let e=(0,r._)(["\n  fragment PartitionMatrixStepRunFragment on Run {\n    id\n    status\n    startTime\n    endTime\n    stepStats {\n      stepKey\n      startTime\n      endTime\n      status\n    }\n    tags {\n      key\n      value\n    }\n  }\n"]);return x=function(){return e},e}function g(){let e=(0,r._)(["\n  fragment PartitionMatrixSolidHandleFragment on SolidHandle {\n    handleID\n    solid {\n      name\n      definition {\n        name\n      }\n      inputs {\n        dependsOn {\n          solid {\n            name\n          }\n        }\n      }\n      outputs {\n        dependedBy {\n          solid {\n            name\n          }\n        }\n      }\n    }\n    ...GraphExplorerSolidHandleFragment\n  }\n\n  ","\n"]);return g=function(){return e},e}let f=new Set([a.SGm.IN_PROGRESS,a.SGm.SKIPPED]);function j(e){return e.startTime||0}function v(e,t){return j(e)-j(t)}function y(e,t){let n=RegExp(e+"\\[.*\\]");return t===e||t==="".concat(e,".compute")||t.match(n)}let S=e=>{let{solidHandles:t,stepQuery:n,partitionNames:r,partitions:i,options:a}=e;return h(()=>{let e=t?(0,p.i)(t).map(e=>e.solid):[],c=(0,s.V)(e,n),d=(0,l.tc)({nodes:c.all,mode:o.hS.FLAT}),u={};return i.forEach(e=>{e.runs.sort(v),u[e.name]=e}),function(e,t,n,r){let i=t.map((t,r)=>{let i=n[t]||{name:t,runsLoaded:!1,runs:[]},s=e.boxes.map(e=>{var t,n;let r,{node:s}=e,o={name:s.name,color:"MISSING",unix:0};if(!i.runs.length)return o;let l=i.runs[i.runs.length-1],a=null===(t=l.stepStats.find(e=>y(s.name,e.stepKey)))||void 0===t?void 0:t.status;if(i.runs.length>1&&(!a||f.has(a))){let e=i.runs.length-2;for(;e>=0&&!r;){let t=null===(n=i.runs[e].stepStats.find(e=>y(s.name,e.stepKey)))||void 0===n?void 0:n.status;if(t&&!f.has(t)){r=t;break}e--}}if(!a&&!r)return o;let c=!a||f.has(a)?"".concat(r,"-MISSING"):a;return{name:s.name,unix:j(l),color:c}});return{...i,steps:s,idx:r}}),s=i.filter(e=>e.runs.length>0).length,o=e.boxes.map((e,t)=>{let n=i.filter(e=>e.steps[t].color.includes("FAILURE")),r=i.filter(e=>e.steps[t].color.endsWith("FAILURE"));return{x:e.x,name:e.node.name,totalFailurePercent:s?Math.round(n.length/s*100):0,finalFailurePercent:s?Math.round(r.length/s*100):0}});if(null==r?void 0:r.showFailuresAndGapsOnly){for(let e=o.length-1;e>=0;e--)0===o[e].finalFailurePercent&&(o.splice(e,1),i.forEach(t=>t.steps.splice(e,1)));for(let e=i.length-1;e>=0;e--)(0===i[e].runs.length||i[e].steps.every(e=>e.color.includes("SUCCESS")))&&i.splice(e,1)}return{stepRows:o,partitionColumns:i}}(d,r,u,a)},[t,n,i,r,a],1e3)},b=(0,i.Ps)(x()),w=(0,i.Ps)(g(),m.Q)},9875:function(e,t,n){n.d(t,{T:function(){return p}});var r=n(73235),i=n(56675),s=n(89130),o=n(2784),l=n(34925),a=n(78491),c=n(88257),d=n(43984);function u(){let e=(0,r._)(["\n  query PartitionStepLoaderQuery($filter: RunsFilter!, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, cursor: $cursor, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ...PartitionMatrixStepRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return u=function(){return e},e}let h={runs:[],partitionNames:[],loading:!1,loadingCursorIdx:0};function p(e){let{partitionSetName:t,partitionTagName:n,partitionNames:r,pageSize:s,runsFilter:l,jobName:a,repositorySelector:u,offset:p,skipQuery:x}=e,g=(0,i.x)(),f=(0,o.useRef)(0),[j,v]=(0,o.useState)(h),y=(0,o.useMemo)(()=>JSON.stringify([...l.map(e=>{let[t,n]=e.value.split("=");return{key:t,value:n}}),{key:d.H.RepositoryLabelTag,value:"".concat(u.repositoryName,"@").concat(u.repositoryLocationName)}]),[u.repositoryLocationName,u.repositoryName,l]),S=(0,o.useMemo)(()=>new Set(r),[r]);return(0,o.useEffect)(()=>{let e=f.current+1;f.current=e;let i=JSON.parse(y);v(e=>({...e,runs:[],loading:!0}));let o=async()=>{if(f.current!==e)return;let o=r.length-(p||0),l=Math.max(0,o-s);for(v(e=>({...e,partitionNames:r,loadingCursorIdx:o}));o>l;){let s=Math.max(o-5,0),l=r.slice(s,o),c=await Promise.all(l.map(e=>{let r={key:d.H.PartitionSet,value:t},s={key:n,value:e};return m(g,{limit:1e3,filter:a?{pipelineName:a,tags:[...i,s]}:{tags:[...i,s,r]}})}));if(f.current!==e)return;o=s,v(e=>({...e,runs:[...e.runs].concat(...c),loading:o>0,loadingCursorIdx:o}))}let u=setInterval(async()=>{if(f.current!==e)return clearInterval(u);v(e=>({...e,loading:!0}));let r=await m(g,{limit:10,filter:{tags:[...i,{key:d.H.PartitionSet,value:t}]}}),s=await m(g,{filter:{statuses:[c.VOA.STARTED],tags:[...i,{key:d.H.PartitionSet,value:t}]}});if(f.current!==e)return clearInterval(u);let o=[...s,...r].filter(e=>e.tags.find(e=>e.key===n&&S.has(e.value)));v(e=>{let t=e.runs.filter(e=>!o.some(t=>t.id===e.id)).concat(o);return{...e,loading:!1,runs:t}})},1e4)};return x||o(),()=>{f.current+=1}},[s,g,t,n,y,a,p,r,x,S]),(0,o.useMemo)(()=>(function(e,t){let n=[],r={};return e.partitionNames.forEach((t,i)=>{r[t]={name:t,runsLoaded:i>=e.loadingCursorIdx,runs:[]},n.push(r[t])}),e.runs.forEach(e=>{var n,i;null===(i=r[(null===(n=e.tags.find(e=>e.key===t))||void 0===n?void 0:n.value)||""])||void 0===i||i.runs.push(e)}),n})(j,n),[j,n])}async function m(e,t){let n=await e.query({fetchPolicy:"no-cache",query:x,variables:t});return"Runs"===n.data.pipelineRunsOrError.__typename&&n.data.pipelineRunsOrError.results||[]}let x=(0,s.Ps)(u(),l.iv,a.B)},96850:function(e,t,n){n.d(t,{AJ:function(){return en},CONSTANTS:function(){return D},Dv:function(){return es},G7:function(){return Z},Yo:function(){return $},oO:function(){return et},p0:function(){return ei},qE:function(){return F}});var r=n(52322),i=n(60129),s=n(14934),o=n(35002),l=n(43212),a=n(39013),c=n(74188),d=n(92917),u=n(53664),h=n(55010),p=n(79106),m=n(35292),x=n(88510),g=n(2784),f=n(47933),j=n(35505),v=n(54516),y=n(59351),S=n(2278),b=n(77539),w=n(79464),k=n(71406),E=n(22921),C=n(86269),T=n(88610),I=n(17008),N=n(98956),P=n(82145),R=n(50646),A=n(94853),O=n(83738),_=n(22563),z=n(4199);let D={ROW_HEIGHT:32,DATE_TIME_HEIGHT:64,TIME_HEADER_HEIGHT:32,ONE_HOUR_MSEC:36e5,EMPTY_STATE_HEIGHT:110,LEFT_SIDE_SPACE_ALLOTTED:320},F=e=>{let{loading:t=!1,jobs:n,rangeMs:o}=e,l=g.useRef(null),{viewport:{width:a},containerProps:{ref:c}}=(0,i.S)(),d=Date.now(),[u,h]=o,p=g.useMemo(()=>n.reduce((e,t)=>{let{repoAddress:n}=t,r=(0,_.Qj)(n);return e[r]=e[r]||[],e[r].push(t),e},{}),[n]),m=Object.keys(p),{expandedKeys:f,onToggle:j,onToggleAll:v}=(0,R.N)(E.y,m),y=g.useMemo(()=>{let e=[];return Object.entries(p).sort((e,t)=>k.Bl.compare(e[0],t[0])).forEach(t=>{let[n,r]=t,i=(0,z.g)(n);i&&(e.push({type:"header",repoAddress:i,jobCount:r.length}),f.includes(n)&&r.sort((e,t)=>k.Bl.compare(e.jobName,t.jobName)).forEach(t=>{e.push({type:"job",repoAddress:i,job:t})}))}),e},[p,f]),S=(0,x.MG)({count:y.length,getScrollElement:()=>l.current,estimateSize:e=>32,overscan:40}),b=S.getTotalSize(),w=S.getVirtualItems();if(!a)return(0,r.jsx)("div",{style:{height:174},ref:c});let C=Object.keys(p).sort((e,t)=>e.localeCompare(t)),T=C.filter(e=>f.includes(e)).reduce((e,t)=>e+p[t].length,0),P=C.length*A.l+32*T,O=(0,N.w)(C.map(e=>{var t;return(null===(t=(0,z.g)(e))||void 0===t?void 0:t.name)||""})),D=C.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:c}),(0,r.jsx)(s.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",flex:"0 0 ".concat(64,"px")},border:"top-and-bottom",children:"Jobs"}),(0,r.jsx)("div",{style:{position:"relative"},children:(0,r.jsx)(Z,{interval:36e5,rangeMs:o,height:D?P:0})}),C.length?(0,r.jsx)("div",{style:{overflow:"hidden",position:"relative"},children:(0,r.jsx)(I.W2,{ref:l,children:(0,r.jsx)(I.Nh,{$totalHeight:b,children:w.map(e=>{let{index:t,key:n,size:i,start:s}=e,l=y[t];if("header"===l.type){let e=(0,_.Qj)(l.repoAddress),t=l.repoAddress.name;return(0,r.jsx)(M,{expanded:f.includes(e),height:i,top:s,repoAddress:l.repoAddress,isDuplicateRepoName:!!(t&&O.has(t)),jobs:p[e],onToggle:j,onToggleAll:v},e)}return(0,r.jsx)(ee,{job:l.job,height:i,top:s,rangeMs:o,width:a},n)})})})}):(0,r.jsx)(et,{loading:t,includesTicks:d<=h})]})},M=e=>{let{expanded:t,onToggle:n,onToggleAll:i,repoAddress:s,isDuplicateRepoName:o,jobs:l,height:a,top:c}=e;return(0,r.jsx)(O.vG,{expanded:t,height:a,start:c,repoAddress:s,showLocation:o,onToggle:n,onToggleAll:i,rightElement:(0,r.jsx)(L,{jobs:l})})},L=g.memo(e=>{let{jobs:t}=e,n=g.useMemo(()=>{let e=0,n=0,r=0;return t.forEach(t=>{let{runs:i}=t;i.forEach(t=>{let{status:i}=t;"SCHEDULED"!==i&&(y.Ys.has(i)?e++:y.hd.has(i)?n++:y._m.has(i)&&r++)})}),{inProgressCount:e,failedCount:n,succeededCount:r}},[t]);return(0,r.jsx)($,{...n})}),$=e=>{let{inProgressCount:t,succeededCount:n,failedCount:i}=e,a=1===t?"1 run in progress":"".concat(t," runs in progress"),c=1===n?"1 run succeeded":"".concat(n," runs succeeded"),d=1===i?"1 run failed":"".concat(i," runs failed");return(0,r.jsxs)(s.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[t>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:a}),placement:"top",children:(0,r.jsx)(l.V,{intent:"primary",children:t})}):null,n>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:c}),placement:"top",children:(0,r.jsx)(l.V,{intent:"success",children:n})}):null,i>0?(0,r.jsx)(o.u,{content:(0,r.jsx)(q,{children:d}),placement:"top",children:(0,r.jsx)(l.V,{intent:"danger",children:i})}):null]})},q=j.ZP.span.withConfig({componentId:"sc-de0a50d3-0"})(["white-space:nowrap;"]),U={month:"numeric",day:"numeric",year:"numeric"},B={month:"short",day:"numeric",year:"numeric",timeZoneName:"short"},H={hour:"numeric",minute:"numeric"},K={hour:"numeric"},Z=e=>{let{interval:t,rangeMs:n,annotations:i,height:o,now:l}=e,[c,d]=n,u=(0,P.O)(),h=g.useMemo(()=>{let e=d-c,t=u(new Date(c),B,"en-US"),n=[],r=new Date(t);for(;r.valueOf()<d;){let e=r.getTime(),t=new Date(e).setDate(r.getDate()+1);r=new Date(t),n.push({dayStart:e,dayEnd:t})}return n.map(t=>{let{dayStart:n,dayEnd:r}=t,i=new Date(n),s=n-c,o=r-n,l=Math.max(0,s/e*100);return{label:u(i,U),key:i.toString(),left:l,width:Math.min(100,(s+o)/e*100)-l}})},[d,u,c]),p=g.useMemo(()=>{let e=d-c,n=c%t,r=c-n;return[...Array(Math.ceil(e/t)+1)].map((n,i)=>{let s=r+i*t,o=new Date(s);return{label:t<36e5?u(o,H).replace(" ",""):u(o,K).replace(" ",""),key:o.toString(),left:(s-c)/e*100}}).filter(e=>e.left>0)},[d,c,t,u]),m=l||Date.now(),x=e=>"".concat(((e-c)/(d-c)*100).toPrecision(3),"%");return(0,r.jsxs)(V,{style:{height:"".concat(o,"px"),top:"-".concat(64,"px")},children:[(0,r.jsx)(J,{children:h.map(e=>(0,r.jsx)(Q,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,r.jsx)(s.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key))}),(0,r.jsx)(J,{children:p.map(e=>(0,r.jsx)(Y,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key))}),(0,r.jsxs)(G,{children:[(0,r.jsx)(W,{style:{left:0,backgroundColor:a.wL()}}),p.map(e=>(0,r.jsx)(W,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)),m>=c&&m<=d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{style:{left:x(m)},children:"Now"}),(0,r.jsx)(W,{style:{left:x(m),backgroundColor:a.Bj(),zIndex:1}})]}):null,(i||[]).filter(e=>e.ms>=c&&e.ms<=d).map(e=>(0,r.jsxs)(g.Fragment,{children:[(0,r.jsx)(X,{style:{left:x(e.ms)},children:e.label}),(0,r.jsx)(W,{style:{left:x(e.ms),backgroundColor:a.Bj(),zIndex:1}})]},e.label))]})]})},V=j.ZP.div.withConfig({componentId:"sc-de0a50d3-1"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,c.b.monospace,a.Aw()),J=j.ZP.div.withConfig({componentId:"sc-de0a50d3-2"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;:first-child{box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";}"],a.wL(),a.wL(),a.wL(),32,a.wL(),a.wL()),Q=j.ZP.div.withConfig({componentId:"sc-de0a50d3-3"})(["position:absolute;padding:8px 0;white-space:nowrap;:not(:first-child){box-shadow:inset 1px 0 0 ",";}"],a.wL()),Y=j.ZP.div.withConfig({componentId:"sc-de0a50d3-4"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],a.wL()),G=j.ZP.div.withConfig({componentId:"sc-de0a50d3-5"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],a.wL(),a.wL()),W=j.ZP.div.withConfig({componentId:"sc-de0a50d3-6"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],a.wL()),X=j.ZP.div.withConfig({componentId:"sc-de0a50d3-7"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:10px;line-height:12px;transform:translate(-50%,0);padding:1px 4px;position:absolute;top:-14px;user-select:none;"],a.Bj(),a.KH()),ee=e=>{let{job:t,top:n,height:i,rangeMs:o,width:l}=e,[c,p]=o,m=l-320,{runs:x}=t,j=g.useMemo(()=>(0,b.i)({runs:x,start:c,end:p,width:m,minChunkWidth:4,minMultipleWidth:12}),[x,c,p,m]);return t.runs.length?(0,r.jsxs)(en,{$height:i,$start:n,children:[(0,r.jsxs)(er,{children:[(0,r.jsx)(d.JO,{name:"asset"===t.jobType?"asset":"job"}),(0,r.jsx)("div",{style:{width:268},children:"asset"===t.jobType?(0,r.jsx)("span",{style:{color:a.Ep()},children:(0,r.jsx)(u.g,{text:t.jobName})}):(0,r.jsx)(f.rU,{to:t.path,children:(0,r.jsx)(u.g,{text:t.jobName})})})]}),(0,r.jsx)(ei,{children:j.map(e=>{let{left:n,width:i,runs:o}=e,l=o.length;return(0,r.jsx)(es,{$background:(0,w.v)(e.runs),$multiple:l>1,style:{left:"".concat(n,"px"),width:"".concat(i,"px")},children:(0,r.jsx)(h.J,{content:(0,r.jsx)(el,{job:t,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,r.jsx)(s.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:l>1?(0,r.jsx)(eo,{children:e.runs.length}):null})})},e.runs[0].id)})})]}):null},et=e=>{let{loading:t,includesTicks:n}=e;return(0,r.jsx)(s.x,{background:a.v8(),padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:"top-and-bottom",children:t?(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(p.$,{purpose:"body-text"}),n?"Loading runs and scheduled ticks":"Loading runs"]}):(0,r.jsxs)(s.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,r.jsx)("div",{children:n?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,r.jsxs)(s.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)(T.A,{icon:(0,r.jsx)(d.JO,{name:"add_circle"}),to:"/overview/jobs",children:"Launch a run"}),(0,r.jsx)("span",{children:"or"}),(0,r.jsx)(T.A,{icon:(0,r.jsx)(d.JO,{name:"materialization"}),to:"/asset-groups",children:"Materialize an asset"})]})]})})},en=j.ZP.div.attrs(e=>{let{$height:t,$start:n}=e;return{style:{height:"".concat(t,"px"),transform:"translateY(".concat(n,"px)")}}}).withConfig({componentId:"sc-de0a50d3-8"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;padding:1px 0;left:0;position:absolute;right:0;top:0;overflow:hidden;transition:background-color 100ms linear;:hover{background-color:",";}"],a.wL(),a.Z$()),er=j.ZP.div.withConfig({componentId:"sc-de0a50d3-9"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),ei=j.ZP.div.withConfig({componentId:"sc-de0a50d3-10"})(["flex:1;position:relative;height:","px;"],32),es=j.ZP.div.withConfig({componentId:"sc-de0a50d3-11"})(["align-items:center;background:",";border-radius:1px;height:","px;position:absolute;top:4px;",";transition:background 200ms linear,opacity 200ms linear,width 200ms ease-in-out;:hover{opacity:0.7;}.chunk-popover-target{display:block;height:100%;width:100%;}"],e=>{let{$background:t}=e;return t},24,e=>{let{$multiple:t}=e;return t?"min-width: ".concat(12,"px"):null}),eo=j.ZP.div.withConfig({componentId:"sc-de0a50d3-12"})(["color:",";cursor:default;font-family:",";font-size:12px;font-weight:600;user-select:none;"],a.KH(),c.b.monospace),el=e=>{let{job:t,batch:n}=e,i=n.runs.slice(0,50),o=n.runs.length-i.length;return(0,r.jsxs)(s.x,{style:{width:"260px"},children:[(0,r.jsx)(s.x,{padding:12,border:"bottom",children:(0,r.jsx)(ea,{children:t.jobName})}),(0,r.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:i.map((e,t)=>(0,r.jsxs)(s.x,{border:t>0?"top":null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,r.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(v.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,r.jsx)(f.rU,{to:"/runs/".concat(e.id),children:(0,r.jsx)(m.fv,{children:e.id.slice(0,8)})})]}),(0,r.jsx)(m.fv,{children:"SCHEDULED"===e.status?(0,r.jsx)(C.v,{timestamp:e.startTime/1e3}):(0,r.jsx)(S.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id))}),o>0?(0,r.jsx)(s.x,{padding:12,border:"top",children:(0,r.jsxs)(f.rU,{to:"".concat(t.path,"/runs"),children:["+ ",o," more"]})}):null]})},ea=j.ZP.strong.withConfig({componentId:"sc-de0a50d3-13"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"])},77539:function(e,t,n){n.d(t,{a:function(){return r},i:function(){return i}});let r=(e,t)=>!(e.end<t.start||t.end<e.start),i=e=>{let{runs:t,start:n,end:r,width:i,minChunkWidth:o,minMultipleWidth:l}=e,a=r-n,c=(Date.now()-n)/(r-n)*i+1,d=t.map(e=>{let t=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:t,endTime:r,left:Math.max(0,Math.floor((t-n)/a*i)),width:Math.max(o,Math.min(Math.ceil((r-t)/a*i),Math.ceil((r-n)/a*i)))}}).sort((e,t)=>e.left-t.left),u=[];for(;d.length;){let e=d.shift(),t=d[0];if(e){if(t&&s(e,t,l,c)){d.shift(),e.runs=[...e.runs,...t.runs],e.startTime=Math.min(e.startTime,t.startTime),e.endTime=Math.max(e.endTime,t.endTime);let n=Math.max(e.left+l,e.left+e.width,t.left+t.width),r=Math.min(e.left,t.left);e.width=n-r,e.left=r,d.unshift(e)}else u.push(e)}}return u},s=(e,t,n,i)=>{let s=e.left,o=e.left+Math.max(e.width,n),l=t.left,a=t.left+Math.max(t.width,n),c=Math.min(e.left,t.left),d=Math.max(e.left+Math.max(e.width,n),t.left+Math.max(t.width,n));return r({start:s,end:o},{start:l,end:a})&&(c>i||d<i)}},79464:function(e,t,n){n.d(t,{v:function(){return o}});var r=n(39013),i=n(59351);let s=e=>{switch(e){case"queued":case"scheduled":return r.A8();case"inProgress":return r.L$();case"failed":return r.FY();case"succeeded":return r.fA()}},o=e=>{let t={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach(e=>{let{status:n}=e;"SCHEDULED"===n?t.scheduled++:i.sy.has(n)?t.queued++:i.Ys.has(n)?t.inProgress++:i.hd.has(n)?t.failed++:i._m.has(n)&&t.succeeded++});let n=Object.keys(t).filter(e=>t[e]>0);if(1===n.length){let[e]=n;return s(e)}let r=e.length,o=[t.failed>0?{status:"failed",pct:100*t.failed/r}:null,t.succeeded>0?{status:"succeeded",pct:100*t.succeeded/r}:null,t.inProgress>0?{status:"inProgress",pct:100*t.inProgress/r}:null,t.queued>0?{status:"queued",pct:100*t.queued/r}:null,t.scheduled>0?{status:"scheduled",pct:100*t.scheduled/r}:null].filter(Boolean),l="",a=0,c=0;for(let e=0;e<o.length;e++){let t=o[e];if(!t)continue;let{status:n,pct:r}=t;c=a,a+=r;let i=s(n);0===e?l+="".concat(i," ").concat(r.toFixed(1),"%, "):e===o.length-1?l+="".concat(i," ").concat(c.toFixed(1),"%"):l+="".concat(i," ").concat(c.toFixed(1),"% ").concat(a.toFixed(1),"%, ")}return"linear-gradient(to right, ".concat(l,")")}},70468:function(e,t,n){n.d(t,{_:function(){return v}});var r=n(52322),i=n(55010),s=n(60603),o=n(38491),l=n(92917),a=n(2784),c=n(33379),d=n(25212),u=n(34147),h=n(39013),p=n(92506),m=n(99417),x=n(54724),g=n(94062);let f=e=>{let{openWithIntent:t,onClose:n,onComplete:i,schedules:s}=e,f=s.length,[j,v]=(0,x.s)();(0,a.useEffect)(()=>{"not-open"===t&&v({type:"reset"})},[t,v]);let[y]=(0,c.D)(m.Wz),[S]=(0,c.D)(m.d0),b=async e=>{let{repoAddress:t,scheduleName:n}=e,r={scheduleSelector:{repositoryLocationName:t.location,repositoryName:t.name,scheduleName:n}},{data:i}=await y({variables:r});switch(null==i?void 0:i.startSchedule.__typename){case"ScheduleStateResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:n,error:i.startSchedule.message})}},w=async e=>{let{scheduleName:t,scheduleState:n}=e,r={scheduleOriginId:n.id,scheduleSelectorId:n.selectorId},{data:i}=await S({variables:r});switch(null==i?void 0:i.stopRunningSchedule.__typename){case"ScheduleStateResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:t,error:i.stopRunningSchedule.message})}},k=async()=>{if("not-open"!==t){for(let e of(v({type:"start"}),s))"start"===t?await b(e):await w(e);v({type:"complete"}),i()}},E="updating"!==j.step;return(0,r.jsxs)(p.Vq,{isOpen:"not-open"!==t,title:"start"===t?"Start schedules":"Stop schedules",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:n,children:[(0,r.jsx)(p.a7,{children:(0,r.jsxs)(u.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===t)return null;switch(j.step){case"initial":if("stop"===t)return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"schedule":"schedules"," will be stopped. Do you want to continue?")});return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"schedule":"schedules"," will be started. Do you want to continue?")});case"updating":case"completed":let e=f>0?j.completion.completed/f:1;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsx)(d.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===j.step?(0,r.jsx)(g.c,{message:"Schedules are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===t||"initial"===j.step)return null;if("updating"===j.step)return(0,r.jsx)("div",{children:"Please do not close the window or navigate away while schedules are being updated."});let e=j.completion.errors,n=Object.keys(e).length,i=j.completion.completed-n;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[i?(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"check_circle",color:h.fA()}),(0,r.jsx)("div",{children:"start"===t?"Successfully started ".concat(1===i?"1 schedule":"".concat(i," schedules"),"."):"Successfully stopped ".concat(1===i?"1 schedule":"".concat(i," schedules"),".")})]}):null,n?(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"warning",color:h.qr()}),(0,r.jsx)("div",{children:"start"===t?"Could not start ".concat(1===n?"1 schedule":"".concat(n," schedules"),"."):"Could not stop ".concat(1===n?"1 schedule":"".concat(n," schedules"),".")})]}),(0,r.jsx)("ul",{children:Object.keys(e).map(t=>(0,r.jsx)("li",{children:(0,r.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,r.jsxs)("strong",{children:[t,":"]}),e[t]?(0,r.jsx)("div",{children:e[t]}):null]})},t))})]}):null]})})()]})}),(0,r.jsx)(p.cN,{children:(()=>{if("not-open"===t)return null;switch(j.step){case"initial":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{intent:"none",onClick:n,children:"Cancel"}),(0,r.jsx)(o.zx,{intent:"primary",onClick:k,children:"start"===t?"Start ".concat(1===f?"1 schedule":"".concat(f," schedules")):"Stop ".concat(1===f?"1 schedule":"".concat(f," schedules"))})]});case"updating":return(0,r.jsx)(o.zx,{intent:"primary",disabled:!0,children:"start"===t?"Starting ".concat(1===f?"1 schedule":"".concat(f," schedules")):"Stopping ".concat(1===f?"1 schedule":"".concat(f," schedules"))});case"completed":return(0,r.jsx)(o.zx,{intent:"primary",onClick:n,children:"Done"})}})()})]})};var j=n(69557);let v=e=>{let{schedules:t,onDone:n}=e,c=t.length,[d,u]=(0,a.useState)("not-open"),{anyOff:h,anyOn:p}=(0,a.useMemo)(()=>(0,j.H)(t.map(e=>{let{scheduleState:t}=e;return t})),[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.J,{content:(0,r.jsxs)(s.v2,{children:[(0,r.jsx)(s.sN,{text:"Start ".concat(1===c?"1 schedule":"".concat(c," schedules")),disabled:!h,"aria-disabled":!h,icon:"toggle_on",onClick:()=>{u("start")}}),(0,r.jsx)(s.sN,{text:"Stop ".concat(1===c?"1 schedule":"".concat(c," schedules")),disabled:!p,"aria-disabled":!p,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,r.jsx)(o.zx,{disabled:!c,intent:"primary",rightIcon:(0,r.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,r.jsx)(f,{openWithIntent:d,schedules:t,onClose:()=>u("not-open"),onComplete:()=>{n()}})]})}},74050:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(52322),i=n(14934),s=n(16629);n(2784);let o=e=>{let t,{daemonHealth:n,...o}=e;if(n){let e=n.allDaemonStatuses.filter(e=>"SCHEDULER"===e.daemonType);if(e.length>0){let n=e[0];t=n.required&&n.healthy}}return!1===t?(0,r.jsx)(i.x,{...o,children:(0,r.jsx)(s.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}},87209:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(22563);let i=(e,t)=>"".concat((0,r.Uz)(e),"-").concat(t)},64265:function(e,t,n){n.d(t,{b:function(){return v}});var r=n(52322),i=n(55010),s=n(60603),o=n(38491),l=n(92917),a=n(2784),c=n(33379),d=n(25212),u=n(34147),h=n(39013),p=n(92506),m=n(89398),x=n(54724),g=n(94062);let f=e=>{let{openWithIntent:t,onClose:n,onComplete:i,sensors:s}=e,f=s.length,[j,v]=(0,x.s)();(0,a.useEffect)(()=>{"not-open"===t&&v({type:"reset"})},[t,v]);let[y]=(0,c.D)(m.VE),[S]=(0,c.D)(m.Xu),b=async e=>{let{repoAddress:t,sensorName:n}=e,r={sensorSelector:{repositoryLocationName:t.location,repositoryName:t.name,sensorName:n}},{data:i}=await y({variables:r});switch(null==i?void 0:i.startSensor.__typename){case"Sensor":v({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":v({type:"update-error",name:n,error:i.startSensor.message})}},w=async e=>{let{sensorName:t,sensorState:n}=e,r={jobOriginId:n.id,jobSelectorId:n.selectorId},{data:i}=await S({variables:r});switch(null==i?void 0:i.stopSensor.__typename){case"StopSensorMutationResult":v({type:"update-success"});return;case"UnauthorizedError":case"PythonError":v({type:"update-error",name:t,error:i.stopSensor.message})}},k=async()=>{if("not-open"!==t){for(let e of(v({type:"start"}),s))"start"===t?await b(e):await w(e);v({type:"complete"}),i()}},E="updating"!==j.step;return(0,r.jsxs)(p.Vq,{isOpen:"not-open"!==t,title:"start"===t?"Start sensors":"Stop sensors",canEscapeKeyClose:E,canOutsideClickClose:E,onClose:n,children:[(0,r.jsx)(p.a7,{children:(0,r.jsxs)(u.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===t)return null;switch(j.step){case"initial":if("stop"===t)return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"sensor":"sensors"," will be stopped. Do you want to continue?")});return(0,r.jsx)("div",{children:"".concat(f," ").concat(1===f?"sensor":"sensors"," will be started. Do you want to continue?")});case"updating":case"completed":let e=f>0?j.completion.completed/f:1;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsx)(d.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===j.step?(0,r.jsx)(g.c,{message:"Sensors are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===t||"initial"===j.step)return null;if("updating"===j.step)return(0,r.jsx)("div",{children:"Please do not close the window or navigate away while sensors are being updated."});let e=j.completion.errors,n=Object.keys(e).length,i=j.completion.completed-n;return(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[i?(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"check_circle",color:h.fA()}),(0,r.jsx)("div",{children:"start"===t?"Successfully started ".concat(1===i?"1 sensor":"".concat(i," sensors"),"."):"Successfully stopped ".concat(1===i?"1 sensor":"".concat(i," sensors"),".")})]}):null,n?(0,r.jsxs)(u.Z,{direction:"column",spacing:8,children:[(0,r.jsxs)(u.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,r.jsx)(l.JO,{name:"warning",color:h.qr()}),(0,r.jsx)("div",{children:"start"===t?"Could not start ".concat(1===n?"1 sensor":"".concat(n," sensors"),":"):"Could not stop ".concat(1===n?"1 sensor":"".concat(n," sensors"),":")})]}),(0,r.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(t=>(0,r.jsx)("li",{children:(0,r.jsxs)(u.Z,{direction:"row",spacing:8,children:[(0,r.jsxs)("strong",{children:[t,":"]}),e[t]?(0,r.jsx)("div",{children:e[t]}):null]})},t))})]}):null]})})()]})}),(0,r.jsx)(p.cN,{children:(()=>{if("not-open"===t)return null;switch(j.step){case"initial":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{intent:"none",onClick:n,children:"Cancel"}),(0,r.jsx)(o.zx,{intent:"primary",onClick:k,children:"start"===t?"Start ".concat(1===f?"1 sensor":"".concat(f," sensors")):"Stop ".concat(1===f?"1 sensor":"".concat(f," sensors"))})]});case"updating":return(0,r.jsx)(o.zx,{intent:"primary",disabled:!0,children:"start"===t?"Starting ".concat(1===f?"1 sensor":"".concat(f," sensors")):"Stopping ".concat(1===f?"1 sensor":"".concat(f," sensors"))});case"completed":return(0,r.jsx)(o.zx,{intent:"primary",onClick:n,children:"Done"})}})()})]})};var j=n(69557);let v=e=>{let{sensors:t,onDone:n}=e,c=t.length,[d,u]=(0,a.useState)("not-open"),{anyOff:h,anyOn:p}=(0,a.useMemo)(()=>(0,j.H)(t.map(e=>{let{sensorState:t}=e;return t})),[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.J,{content:(0,r.jsxs)(s.v2,{children:[(0,r.jsx)(s.sN,{text:"Start ".concat(1===c?"1 sensor":"".concat(c," sensors")),disabled:!h,"aria-disabled":!h,icon:"toggle_on",onClick:()=>{u("start")}}),(0,r.jsx)(s.sN,{text:"Stop ".concat(1===c?"1 sensor":"".concat(c," sensors")),disabled:!p,"aria-disabled":!p,icon:"toggle_off",onClick:()=>{u("stop")}})]}),placement:"bottom-end",children:(0,r.jsx)(o.zx,{disabled:!c,intent:"primary",rightIcon:(0,r.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,r.jsx)(f,{openWithIntent:d,sensors:t,onClose:()=>u("not-open"),onComplete:()=>{n()}})]})}},55546:function(e,t,n){n.d(t,{e:function(){return en},F:function(){return et}});var r=n(52322),i=n(74580),s=n(35292),o=n(43212),l=n(14934),a=n(38491),c=n(90441),d=n(74188),u=n(92917),h=n(2784),p=n(19679),m=n(84842);let x=e=>{var t;let{metadata:n}=e;return(null==n?void 0:null===(t=n.assetKeys)||void 0===t?void 0:t.length)?(0,r.jsx)(l.x,{flex:{direction:"column",gap:2},children:n.assetKeys.map(e=>(0,r.jsx)(m.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,r.jsx)("span",{})};var g=n(33379),f=n(35002),j=n(89398),v=n(36803),y=n(20718);let S=e=>{let{repoAddress:t,sensor:n}=e,{permissions:{canStartSensor:i,canStopSensor:s}}=(0,v.xz)(t.location),{name:o}=n,l={...(0,y.$)(t),sensorName:o},[c,{loading:d}]=(0,g.D)(j.Lq,{onCompleted:j.oI}),u=i&&s,h=u?'In code, a default status for "'.concat(o,'" has been set to "').concat(n.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):v.Qr;return(0,r.jsx)(f.u,{content:h,display:"flex",children:(0,r.jsx)(a.zx,{disabled:d||!u,onClick:()=>{c({variables:{sensorSelector:l}})},children:"Reset sensor status"})})};var b=n(69698),w=n(75306),k=n(16336),E=n(88257),C=n(79059),T=n(86269),I=n(73235),N=n(89130),P=n(92506),R=n(34147),A=n(89891),O=n(39013),_=n(79106),z=n(74159),D=n(37483),F=n(35505),M=n(49035),L=n(1747);function $(e){let{includeTitle:t=!0,requests:n}=e,i=(0,h.useMemo)(()=>{if(!n.length)return[];let e=[];return n.forEach(t=>{let{partitionKeys:n,partitionsDefName:r,type:i}=t;null==n||n.forEach(t=>{e.push({key:t,def:r,type:i})})}),e},[n]);return i.length?(0,r.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[t?(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(u.JO,{name:"partition"}),(0,r.jsx)(s.pm,{children:"Dynamic Partition Requests"})]}):null,(0,r.jsxs)(L.i,{style:{borderRight:"1px solid ".concat(O.wL())},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Partition"}),(0,r.jsx)("th",{children:"Partition definition"}),(0,r.jsx)("th",{children:"Requested change"})]})}),(0,r.jsx)("tbody",{children:i.map((e,t)=>{let{key:n,def:i,type:s}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:s===E.Dq2.ADD_PARTITIONS?(0,r.jsx)(o.V,{intent:"success",children:(0,r.jsx)("span",{children:"Add Partition"})}):(0,r.jsx)(o.V,{intent:"danger",children:(0,r.jsx)("span",{children:"Delete Partition"})})})]},t)})})]})]}):null}var q=n(76562),U=n(8068),B=n(50309),H=n(78491),K=n(23399),Z=n(71406),V=n(77851);function J(){let e=(0,I._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return J=function(){return e},e}let Q=e=>{let{isOpen:t,onClose:n,name:i}=e;return(0,r.jsx)(P.Vq,{isOpen:t,onClose:n,style:{width:"70vw",display:"flex"},icon:"sensors",title:i,children:(0,r.jsx)(Y,{...e})})},Y=e=>{var t;let{repoAddress:n,name:i,currentCursor:c,onClose:d,jobName:m}=e,[x]=(0,g.D)(G),[f,j]=(0,h.useState)(c),[v,y]=(0,h.useState)(!1),[S,b]=(0,h.useState)(null),[w,k]=(0,h.useState)(null),E=(0,h.useMemo)(()=>({sensorName:i,repositoryLocationName:n.location,repositoryName:n.name}),[n,i]),C=(0,h.useCallback)(async()=>{var e,t;y(!0);let n=null===(e=(await x({variables:{selectorData:E,cursor:f}})).data)||void 0===e?void 0:e.sensorDryRun;n?(null==n?void 0:n.__typename)==="DryRunInstigationTick"?(null===(t=n.evaluationResult)||void 0===t?void 0:t.error)?b(n.evaluationResult.error):k(n):(null==n?void 0:n.__typename)==="SensorNotFoundError"?(0,U._K)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(i)}):b(n):(0,Z.UT)("sensorDryRun Mutation returned no data??"),y(!1)},[x,E,f,i]),T=(0,h.useMemo)(()=>w||S?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(a.zx,{"data-testid":(0,V.N)("test-again"),onClick:()=>{k(null),b(null)},children:"Test again"}),(0,r.jsx)(a.zx,{intent:"primary",onClick:d,children:"Close"})]}):v?(0,r.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(a.zx,{onClick:d,children:"Cancel"})}):(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(a.zx,{onClick:d,children:"Cancel"}),(0,r.jsx)(a.zx,{onClick:C,intent:"primary","data-testid":(0,V.N)("evaluate"),children:"Evaluate"})]}),[w,S,v,d,C]),[I,N]=(0,h.useState)("Unpersisted"),[F]=(0,g.D)(p.T),L=(0,h.useCallback)(async()=>{var e;let t=null==w?void 0:null===(e=w.evaluationResult)||void 0===e?void 0:e.cursor;t||(0,Z.UT)("Did not expect to get here"),N("Persisting");let{data:n}=await F({variables:{sensorSelector:E,cursor:t}});if((null==n?void 0:n.setSensorCursor.__typename)==="Sensor")await (0,B.B7)({message:"Cursor value updated",intent:"success"}),N("Persisted");else if(null==n?void 0:n.setSensorCursor){let e=n.setSensorCursor;await (0,B.B7)({intent:"danger",message:(0,r.jsxs)(R.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("div",{children:"Could not set cursor value."}),(0,r.jsx)(A.Z,{color:O.KH(),underline:"always",onClick:()=>{(0,U._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,r.jsx)(K.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==w?void 0:null===(t=w.evaluationResult)||void 0===t?void 0:t.cursor,E,F]),q=(0,h.useMemo)(()=>{if(w||S){var e,t,d,h,p,x,g;let j=null==w?void 0:null===(e=w.evaluationResult)||void 0===e?void 0:e.runRequests,v=(null==j?void 0:j.length)||0,y=!S&&0===v,b=null==w?void 0:null===(t=w.evaluationResult)||void 0===t?void 0:t.dynamicPartitionsRequests;return(0,r.jsx)(l.x,{flex:{direction:"column",gap:8},children:(0,r.jsxs)(l.x,{children:[(0,r.jsxs)(W,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Result"}),(0,r.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:S?(0,r.jsx)(o.V,{intent:"danger",children:"Failed"}):v?(0,r.jsxs)(o.V,{intent:"success",children:[v," run requests"]}):(0,r.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Used cursor value"}),(0,r.jsx)("pre",{children:(null==f?void 0:f.length)?f:"None"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Computed cursor value"}),(0,r.jsx)("pre",{children:(null==w?void 0:null===(h=w.evaluationResult)||void 0===h?void 0:null===(d=h.cursor)||void 0===d?void 0:d.length)?null==w?void 0:w.evaluationResult.cursor:S?"Error":"None"}),S||(null!=c?c:"")===(null!==(g=null==w?void 0:null===(p=w.evaluationResult)||void 0===p?void 0:p.cursor)&&void 0!==g?g:"")?null:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(a.zx,{disabled:["Persisting","Persisted"].includes(I),loading:"Persisting"===I,onClick:L,children:(0,r.jsx)("span",{"data-testid":(0,V.N)("persist-cursor"),children:"Persisting"===I?"Persisting":"Persisted"===I?"Persisted":"Persist computed cursor value"})}),"Persisted"===I?(0,r.jsx)(u.JO,{name:"check_circle",color:O.fA()}):null]})]})]}),S?(0,r.jsx)("div",{children:(0,r.jsx)(K.T9,{error:S})}):null,y?(0,r.jsxs)("div",{children:[(0,r.jsx)(s.pm,{children:"Skip reason"}),(0,r.jsx)("div",{children:(null==w?void 0:null===(x=w.evaluationResult)||void 0===x?void 0:x.skipReason)||"No skip reason was output"})]}):null,v&&j?(0,r.jsx)(M.k,{runRequests:j,name:i,jobName:m,isJob:!0,repoAddress:n}):null,(null==b?void 0:b.length)?(0,r.jsx)("div",{style:{marginTop:"24px"},children:(0,r.jsx)($,{requests:b})}):null]})})}return v?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(_.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Evaluating sensor"})]}):(0,r.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:"Cursor"}),(0,r.jsx)(z.oi,{value:f,onChange:e=>j(e.target.value),"data-testid":(0,V.N)("cursor-input")}),""!==c&&c?null:(0,r.jsx)(l.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,r.jsx)(D.t,{icon:"no-results",title:"You're not using a cursor",description:(0,r.jsxs)("span",{children:["Check our"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[w,S,v,c,I,L,i,m,n,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:q})}),(0,r.jsx)(P.cN,{topBorder:!0,children:T})]})},G=(0,N.Ps)(J(),q.s,H.B),W=F.ZP.div.withConfig({componentId:"sc-ba27fb61-0"})(["display:grid;grid-template-columns:repeat(3,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],O.wL(),s.pm);var X=n(58905);let ee={showSeconds:!0,showTimezone:!1},et=e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"),en=e=>{var t,n,m;let{sensor:g,repoAddress:f,daemonHealth:j,refreshState:v,selectionQueryResult:y}=e,{name:I,sensorState:{status:N,ticks:P},metadata:R}=g,[A,O]=(0,h.useState)(!1),_={sensorName:g.name,repositoryName:f.name,repositoryLocationName:f.location},z=P.length?P[0]:null,D=g.sensorState.typeSpecificData&&"SensorData"===g.sensorState.typeSpecificData.__typename&&g.sensorState.typeSpecificData.lastCursor,[F,M]=(0,h.useState)(!1),L=N===E.ynu.RUNNING,$=null===(t=y.data)||void 0===t?void 0:t.sensorOrError,q=(null==$?void 0:$.__typename)==="Sensor"?$:null,U=null==q?void 0:q.assetSelection;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.m,{title:(0,r.jsx)(s.X6,{children:I}),icon:"sensors",tags:(0,r.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,r.jsx)(C.b,{repoAddress:f})]}),right:(0,r.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(k.xi,{refreshState:v}),g.sensorType===E.dEY.STANDARD?(0,r.jsx)(a.zx,{onClick:()=>{M(!0)},children:"Test Sensor"}):null]})}),(0,r.jsx)(Q,{isOpen:F,onClose:()=>{M(!1)},currentCursor:D||"",name:g.name,repoAddress:f,jobName:(null===(m=g.targets)||void 0===m?void 0:null===(n=m[0])||void 0===n?void 0:n.pipelineName)||""}),(0,r.jsx)(c.fJ,{children:(0,r.jsxs)("tbody",{children:[g.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:g.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:z?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,r.jsx)(T.v,{timestamp:z.timestamp,timeFormat:ee}),(0,r.jsx)(X.a,{tick:z})]})}):"Sensor has never run"})]}),g.nextTick&&j&&L&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(T.v,{timestamp:g.nextTick.timestamp,timeFormat:ee})})]}),g.targets&&g.targets.length||U?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)("td",{children:(0,r.jsx)(w.D,{targets:g.targets,repoAddress:f,selectionQueryResult:y,sensorType:g.sensorType})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(b.c,{repoAddress:f,sensor:g}),g.canReset&&(0,r.jsx)(S,{repoAddress:f,sensor:g})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Frequency"}),(0,r.jsx)("td",{children:et(g.minIntervalSeconds)})]}),R.assetKeys&&R.assetKeys.length?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Monitored assets"}),(0,r.jsx)("td",{children:(0,r.jsx)(x,{metadata:R})})]}):null,g.sensorType!==E.dEY.AUTO_MATERIALIZE&&g.sensorType!==E.dEY.AUTOMATION?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontFamily:d.b.monospace,fontSize:"14px"},children:D||"None"}),(0,r.jsx)(a.zx,{icon:(0,r.jsx)(u.JO,{name:"edit"}),onClick:()=>O(!0),children:"Edit"})]}),(0,r.jsx)(p.x,{isOpen:A,sensorSelector:_,cursor:D||"",onClose:()=>O(!1)})]})]}):null]})})]})}},5409:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(52322),i=n(14934),s=n(16629);n(2784);let o=e=>{let{sensorDaemonStatus:t,assetDaemonStatus:n,...o}=e,l=t&&!1===t.healthy&&t.required,a=n&&!1==!n.healthy&&n.required;return a||l?(0,r.jsx)(i.x,{...o,children:(0,r.jsx)(s.b,{intent:"warning",title:l?a?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,r.jsxs)("div",{children:["See the"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null}},6265:function(e,t,n){n.d(t,{Z:function(){return en},A:function(){return ee}});var r=n(73235),i=n(52322),s=n(40794),o=n(89130),l=n(51484),a=n(14934),c=n(79106),d=n(39013),u=n(37483),h=n(49308),p=n(2784),m=n(7267),x=n(55546),g=n(581);function f(){let e=(0,r._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return f=function(){return e},e}let j=(0,o.Ps)(f(),g.ai);var v=n(5409),y=n(3842),S=n(16629),b=n(35292),w=n(78491),k=n(93812);function E(){let e=(0,r._)(["\n  query AssetSensorTicksQuery(\n    $sensorSelector: SensorSelector!\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        sensorState {\n          id\n          ticks(\n            dayRange: $dayRange\n            dayOffset: $dayOffset\n            statuses: $statuses\n            limit: $limit\n            cursor: $cursor\n            beforeTimestamp: $beforeTimestamp\n            afterTimestamp: $afterTimestamp\n          ) {\n            id\n            ...AssetDaemonTickFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return E=function(){return e},e}let C=(0,o.Ps)(E(),k.B,w.B);var T=n(16336),I=n(76575),N=n(28363),P=n(4733),R=n(88257),A=n(4378),O=n(34219),_=n(15332);let z=e=>{var t,n;let{repoAddress:r,sensor:s,setSelectedTick:o,setTableView:l,setTimerange:a,setParentStatuses:c}=e,[d,u]=(0,A.q)({queryKey:"statuses",decode:(0,p.useCallback)(e=>{let{statuses:t}=e;return new Set(t?JSON.parse(t):[R.izS.STARTED,R.izS.SUCCESS,R.izS.FAILURE,R.izS.SKIPPED])},[]),encode:(0,p.useCallback)(e=>({statuses:JSON.stringify(Array.from(e))}),[])}),{queryResult:h,paginationProps:m}=(0,_.l)({query:C,variables:{sensorSelector:{sensorName:s.name,repositoryName:r.name,repositoryLocationName:r.location},statuses:(0,p.useMemo)(()=>Array.from(d),[d])},nextCursorForResult:e=>{if((null==e?void 0:e.sensorOrError.__typename)==="Sensor"){let n=e.sensorOrError.sensorState.ticks;if(n.length){var t;return null===(t=n[14])||void 0===t?void 0:t.id}}},getResultArray:e=>(null==e?void 0:e.sensorOrError.__typename)==="Sensor"?e.sensorOrError.sensorState.ticks:[],pageSize:15});(0,O.Hu)(h,"AssetSensorTicksQuery"),(0,T.C4)(h,1e4,!m.hasPrevCursor);let x=(null===(n=h.data)||void 0===n?void 0:null===(t=n.sensorOrError)||void 0===t?void 0:t.__typename)==="Sensor"?h.data.sensorOrError.sensorState.ticks:null;return(0,p.useEffect)(()=>{if(m.hasPrevCursor){if(x&&x.length){var e,t;let n=null===(e=x[x.length-1])||void 0===e?void 0:e.timestamp,r=null===(t=x[0])||void 0===t?void 0:t.endTimestamp;n&&r&&a([n,r])}}else a(void 0)},[x,m.hasPrevCursor,a]),(0,p.useEffect)(()=>{m.hasPrevCursor?c(Array.from(d)):c(void 0)},[m.hasPrevCursor,c,d]),(0,i.jsx)(P.V,{loading:h.loading,ticks:x||[],paginationProps:m,setSelectedTick:o,setStatuses:u,setTableView:l,statuses:d})};var D=n(59502),F=n(57758),M=n(43984),L=n(22563);let $=e=>{var t;let{repoAddress:n,sensor:r,loading:s,daemonStatus:o}=e,[l,u]=(0,p.useState)(!1),[h,m]=(0,p.useState)(void 0),[x,g]=(0,p.useState)(void 0),f=(0,p.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return x||h?{sensorSelector:{sensorName:r.name,repositoryName:n.name,repositoryLocationName:n.location},afterTimestamp:null==x?void 0:x[0],beforeTimestamp:null==x?void 0:x[1],statuses:h}:{sensorSelector:{sensorName:r.name,repositoryName:n.name,repositoryLocationName:n.location},afterTimestamp:(e-12e5)/1e3}},[r,n,h,x]),[j,w]=(0,y.t)(C);(0,O.Hu)(w,"AssetSensorTicksQuery");let k=(0,p.useCallback)(async()=>await j({variables:f()}),[j,f]);(0,T.bT)({refresh:k,enabled:!l&&!x&&!h,intervalMs:2e3,leading:!0});let[E,P]=(0,p.useState)(null),[_,$]=(0,A.q)((0,p.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),q=null!==(t=w.data)&&void 0!==t?t:w.previousData,U=(0,p.useMemo)(()=>(null==q?void 0:q.sensorOrError.__typename)==="Sensor"?q.sensorOrError.sensorState.ticks:[],[q]),B=(0,p.useMemo)(()=>{var e;return null!==(e=U.map((e,t)=>{let n=U[t-1];if(n&&(0,F.g6)(e,t)){let t={...e};return t.endTimestamp=n.timestamp,t.status=R.izS.FAILURE,t}return e}))&&void 0!==e?e:[]},[JSON.stringify(U.map(e=>"".concat(e.id,":").concat(e.status)))]),H=(0,p.useCallback)(e=>{u(!!e)},[u]),K=(0,p.useMemo)(()=>[{key:M.H.RepositoryLabelTag,value:(0,L.Wg)(n)},{key:M.H.SensorName,value:r.name}],[n,r]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.x,{padding:{vertical:12,horizontal:24},flex:{direction:"column",gap:12},children:(0,i.jsx)(S.b,{intent:"info",title:"[Experimental] Dagster can automatically materialize assets when criteria are met.",description:(0,i.jsxs)(i.Fragment,{children:["Auto-materialization enables a declarative approach to asset scheduling – instead of defining imperative workflows to materialize your assets, you just describe the conditions under which they should be materialized."," ",(0,i.jsx)("a",{href:"https://docs.dagster.io/concepts/assets/asset-auto-execution",target:"_blank",rel:"noreferrer",children:"Learn more about auto-materialization here"}),"."]})})}),(0,i.jsx)(v.F,{assetDaemonHealth:o,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,i.jsx)(b.Tj,{children:"Evaluation timeline"})}),!r&&s?(0,i.jsxs)(a.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:d.$()},children:"Loading evaluations…"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.p,{ticks:B,onHoverTick:H,onSelectTick:P,exactRange:x,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,i.jsx)(I.d,{tick:E,isOpen:!!E,close:()=>{P(null)}}),"evaluations"===_?(0,i.jsx)(z,{repoAddress:n,sensor:r,setSelectedTick:P,setTableView:$,setParentStatuses:m,setTimerange:g}):(0,i.jsx)(N.o,{filterTags:K,setTableView:$})]})]})};var q=n(80122),U=n(89010);function B(){let e=(0,r._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return B=function(){return e},e}let H=e=>{let{sensor:t,repoAddress:n,highlightedIds:r,tabs:s}=e,{queryResult:o,paginationProps:l}=(0,_.l)({query:K,variables:{filter:{tags:[{key:M.H.SensorName,value:t.name},{key:M.H.RepositoryLabelTag,value:(0,L.Wg)(n)}]}},nextCursorForResult:e=>{var t;if("Runs"===e.pipelineRunsOrError.__typename)return null===(t=e.pipelineRunsOrError.results[19])||void 0===t?void 0:t.id},getResultArray:e=>(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results,pageSize:20});(0,O.Hu)(o,"PreviousRunsForSensorQuery"),(0,T.C4)(o,l.hasPrevCursor?36e5:1e4);let a=o.data;if(a&&(null==a?void 0:a.pipelineRunsOrError.__typename)==="Runs"||(a=o.previousData),!a||(null==a?void 0:a.pipelineRunsOrError.__typename)!=="Runs")return null;let c=a.pipelineRunsOrError.results;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.AL,{actionBarComponents:s,runs:c,highlightedIds:r,hideCreatedBy:!0}),(0,i.jsx)("div",{style:{paddingBottom:"16px"},children:(0,i.jsx)(q.pI,{...l})})]})},K=(0,o.Ps)(B(),U.ZZ);var Z=n(23399),V=n(69737),J=n(20171),Q=n(40782),Y=n(9790),G=n(20718);function W(){let e=(0,r._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return W=function(){return e},e}function X(){let e=(0,r._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...SensorAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment SensorAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          key {\n            path\n          }\n          definition {\n            id\n            autoMaterializePolicy {\n              __typename\n            }\n          }\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}let ee=e=>{let{repoAddress:t}=e;(0,V.Px)();let{sensorName:n}=(0,m.UO)();(0,J.j)("Sensor: ".concat(n));let r={...(0,G.$)(t),sensorName:n},[o,g]=(0,p.useState)(void 0),[f,j]=(0,p.useState)(void 0),y=(0,p.useMemo)(()=>f||o?{afterTimestamp:null==f?void 0:f[0],beforeTimestamp:null==f?void 0:f[1],statuses:o}:{},[o,f]),[S,b]=(0,A.q)((0,p.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),w=(0,s.a)(et,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0});(0,O.Hu)(w,"SensorRootQuery");let k=(0,s.a)(en,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0});(0,O.Hu)(k,"SensorAssetSelectionQuery");let E=(0,T.C4)(w,T.dT),C=(0,T.C4)(k,T.dT),I=(0,T.V5)(E,C),{data:N,loading:P}=w,_=(0,i.jsx)(l.h,{activeItems:new Set([S]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{b(e)}});if(!N&&P)return(0,i.jsxs)(a.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:d.$()},children:"Loading sensor…"})]});if(!N||"SensorNotFoundError"===N.sensorOrError.__typename)return(0,i.jsx)(a.x,{padding:{vertical:32},children:(0,i.jsx)(u.t,{icon:"error",title:"Could not find sensor `".concat(n,"` in definitions for `").concat(t.name,"`")})});let{sensorOrError:z}=N;if("PythonError"===z.__typename)return(0,i.jsx)(Z.T9,{error:z});if("UnauthorizedError"===z.__typename)return(0,i.jsx)(m.l_,{to:"/overview/sensors"});let{instance:D}=N;if(z.sensorType===R.dEY.AUTO_MATERIALIZE||z.sensorType===R.dEY.AUTOMATION){let e=D.daemonHealth.ampDaemonStatus;return(0,i.jsxs)(h.T,{children:[(0,i.jsx)(x.e,{repoAddress:t,sensor:z,daemonHealth:e.healthy,refreshState:I,selectionQueryResult:k}),(0,i.jsx)($,{repoAddress:t,sensor:z,daemonStatus:e,loading:P})]})}let F=D.daemonHealth.sensorDaemonStatus;return(0,i.jsxs)(h.T,{children:[(0,i.jsx)(x.e,{repoAddress:t,sensor:z,daemonHealth:F.healthy,refreshState:I,selectionQueryResult:k}),(0,i.jsx)(v.F,{sensorDaemonStatus:F,padding:{vertical:16,horizontal:24}}),(0,i.jsx)(Y.C,{repoAddress:t,name:z.name,...y}),(0,i.jsx)(a.x,{margin:{top:32},border:"top",children:"evaluations"===S?(0,i.jsx)(Y.H,{tabs:_,repoAddress:t,name:z.name,setParentStatuses:g,setTimerange:j}):(0,i.jsx)(H,{repoAddress:t,sensor:z,tabs:_})})]})},et=(0,o.Ps)(W(),j,w.B,Q.O),en=(0,o.Ps)(X(),w.B)},75306:function(e,t,n){n.d(t,{D:function(){return C}});var r=n(52322),i=n(14934),s=n(92506),o=n(38491),l=n(89891),a=n(92917),c=n(83373);let d=e=>{let{isOpen:t,onToggle:n}=e;return(0,r.jsx)(c.k,{onClick:e=>{n(e)},style:{cursor:"pointer",width:18},children:(0,r.jsx)(a.JO,{name:"arrow_drop_down",style:{transform:t?"rotate(0deg)":"rotate(-90deg)"}})})};var u=n(35292),h=n(39013),p=n(53664),m=n(2784),x=n(47933),g=n(8068),f=n(23399),j=n(71406),v=n(44900),y=n(75442),S=n(88257),b=n(33847),w=n(81732),k=n(70812),E=n(100);let C=e=>{var t;let{sensorType:n,targets:s,selectionQueryResult:o,repoAddress:l}=e,a=(0,E.Ux)(l),c=null===(t=o.data)||void 0===t?void 0:t.sensorOrError,d=(null==c?void 0:c.__typename)==="Sensor"?c:null;if(!s&&!d)return(0,r.jsx)("span",{});let u=null==d?void 0:d.assetSelection,h=null==s?void 0:s.filter(e=>!(0,v.pv)(e.pipelineName));return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:2},children:[u&&(0,r.jsx)(T,{assetSelection:u,sensorType:n}),null==h?void 0:h.map(e=>e.pipelineName?(0,r.jsx)(b.h,{pipelineName:e.pipelineName,pipelineHrefContext:l,isJob:!!(a&&(0,E.E8)(a,e.pipelineName))},e.pipelineName):null)]})},T=e=>{let{assetSelection:t,sensorType:n}=e,[a,c]=m.useState(!1),d="PythonError"===t.assetsOrError.__typename?t.assetsOrError:null,u=m.useMemo(()=>"PythonError"===t.assetsOrError.__typename?[]:t.assetsOrError.nodes.slice().sort((e,t)=>j.Bl.compare((0,v.ll)(e.key),(0,v.ll)(t.key))),[t.assetsOrError]),h=m.useMemo(()=>u.filter(e=>{var t;return!!(null===(t=e.definition)||void 0===t?void 0:t.autoMaterializePolicy)}),[u]),p=m.useMemo(()=>u.filter(e=>{var t;return!(null===(t=e.definition)||void 0===t?void 0:t.autoMaterializePolicy)}),[u]),x=t.assetSelectionString||"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Vq,{isOpen:a,title:"Targeted assets",onClose:()=>c(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px",transform:"scale(1)"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,r.jsx)(i.x,{flex:{direction:"column"},children:n===S.dEY.AUTO_MATERIALIZE||n===S.dEY.AUTOMATION?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:h}),(0,r.jsx)(I,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:p})]}):(0,r.jsx)(I,{assets:u})}),(0,r.jsx)(s.cN,{topBorder:!0,children:(0,r.jsx)(o.zx,{intent:"primary",onClick:()=>{c(!1)},children:"Close"})})]}),(0,r.jsx)(l.Z,{onClick:()=>{d?(0,g._K)({title:"Python Error",body:(0,r.jsx)(f.T9,{error:d})}):c(!0)},children:d?(0,r.jsx)(r.Fragment,{children:"Error loading asset selection"}):(0,r.jsxs)(r.Fragment,{children:[x.slice(0,1).toUpperCase(),x.slice(1)]})})]})},I=e=>{let{assets:t,title:n,titleBorder:s="top-and-bottom"}=e,[o,l]=m.useState(!0);return(0,r.jsxs)(r.Fragment,{children:[n?(0,r.jsx)(i.x,{border:s,padding:{right:24,vertical:12},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:()=>{l(!o)},children:[(0,r.jsx)(d,{onToggle:()=>{},isOpen:o}),(0,r.jsxs)(u.Tj,{children:[n," (",k.V.format(t.length),")"]})]})}):null,o?t.length?(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll"},children:(0,r.jsx)(w.Y,{padding:0,items:t,renderItem:e=>(0,r.jsx)(N,{asset:e},e.id),itemBorders:!0})}):(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:12},children:(0,r.jsx)(u.YS,{color:h.$(),children:"0 assets"})}):null]})},N=e=>{let{asset:t}=e;return(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,r.jsx)(x.rU,{to:(0,y.p)(t.key),target:"_blank",children:(0,r.jsx)(i.x,{style:{overflow:"hidden"},children:(0,r.jsx)(p.g,{text:(0,v.ll)(t.key)})})})})}},40389:function(e,t,n){n.d(t,{x:function(){return i}});var r=n(22563);let i=(e,t)=>"".concat((0,r.Uz)(e),"-").concat(t)},49035:function(e,t,n){n.d(t,{k:function(){return g}});var r=n(52322),i=n(14934),s=n(43212),o=n(92917),l=n(1747),a=n(39013),c=n(19126),d=n.n(c),u=n(33847),h=n(77851),p=n(88610),m=n(100),x=n(10539);let g=e=>{let{runRequests:t,isJob:n,repoAddress:c,mode:g,jobName:f}=e,j=(0,m.Ux)(c),v=(0,r.jsx)("tbody",{"data-testid":(0,h.N)("table-body"),children:t.map((e,t)=>{var l,a,m;return(0,r.jsxs)("tr",{"data-testid":(0,h.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(u.h,{pipelineName:null!==(a=e.jobName)&&void 0!==a?a:f,pipelineHrefContext:c,isJob:!!j&&n,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(e=>{let{key:t}=e;return!["dagster/schedule_name"].includes(t)}).map(e=>{let{key:t,value:n}=e;return(0,r.jsx)(s.V,{children:"".concat(t,": ").concat(n)},t)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(p.A,{icon:(0,r.jsx)(o.JO,{name:"edit"}),target:"_blank",to:(0,x.$U)(c,"/pipeline_or_job/".concat(null!==(m=e.jobName)&&void 0!==m?m:f,"/playground/setup?").concat(d().stringify({mode:g,config:e.runConfigYaml,tags:e.tags,assetSelection:null===(l=e.assetSelection)||void 0===l?void 0:l.map(e=>{let{path:t}=e;return{assetKey:{path:t}}})}))),children:"Open in Launchpad"})})]},t)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(l.i,{style:{borderRight:"1px solid ".concat(a.wL()),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[n?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),v]})})}},76562:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(73235);function i(){let e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return i=function(){return e},e}let s=(0,n(89130).Ps)(i())},58905:function(e,t,n){n.d(t,{a:function(){return g}});var r=n(52322),i=n(43212),s=n(75561),o=n(39013),l=n(35002),a=n(14934),c=n(89891),d=n(40191),u=n(92506),h=n(38491),p=n(2784),m=n(23399),x=n(88257);let g=e=>{let{tick:t,isStuckStarted:n}=e,[g,f]=(0,p.useState)(!1),j=(0,p.useMemo)(()=>{let e="requestedAssetMaterializationCount"in t;switch(t.status){case x.izS.STARTED:return(0,r.jsx)(i.V,{intent:"primary",icon:n?void 0:"spinner",children:n?"In progress":"Evaluating"});case x.izS.SKIPPED:let u=(0,r.jsx)(s.m,{fillColor:o.fk(),label:e?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,r.jsx)(l.u,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case x.izS.FAILURE:return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(i.V,{intent:"danger",children:"Failure"}),t.error?(0,r.jsx)(c.Z,{onClick:()=>{f(!0)},children:"View"}):null]});case x.izS.SUCCESS:let h=e?t.requestedAssetMaterializationCount:t.runIds.length,p=(0,r.jsxs)(i.V,{intent:"success",children:[h," ",e?"materialization":"run",(0,d.I)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:p})}return p}},[n,t]);return(0,r.jsxs)(r.Fragment,{children:[j,t.error?(0,r.jsxs)(u.Vq,{isOpen:g,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(m.T9,{error:t.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(h.zx,{intent:"primary",onClick:()=>{f(!1)},children:"Close"})})]}):null]})}},2389:function(e,t,n){n.d(t,{W:function(){return o}});var r=n(52322),i=n(35002),s=n(37504);let o=e=>{let{checkedCount:t,totalCount:n,onToggleAll:o}=e;return(0,r.jsx)(i.u,{content:"".concat(t," of ").concat(n," selected"),placement:"top",children:(0,r.jsx)(s.X,{indeterminate:t>0&&t!==n,checked:t>0&&t===n,onChange:e=>{e.target instanceof HTMLInputElement&&o(t!==n)}})})}},2949:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(52322),i=n(83586),s=n(88257),o=n(4378);let l=()=>{let[e,t]=(0,o.q)({encode:e=>({instigationStatus:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.instigationStatus)||void 0===t?void 0:t.split(","))||[])}});return(0,i.im)({name:"Running state",icon:"toggle_off",allValues:[{value:s.ynu.RUNNING,match:["on","running"]},{value:s.ynu.STOPPED,match:["off","stopped"]}],getKey:e=>e,renderLabel:e=>{let{value:t}=e;return(0,r.jsx)("span",{children:t===s.ynu.RUNNING?"Running":"Stopped"})},state:e,onStateChanged:t,getStringValue:e=>e})}},73658:function(e,t,n){n.d(t,{W:function(){return c}});var r=n(52322),i=n(2784);let s=e=>{let[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=setTimeout(()=>n(!0),e);return()=>clearTimeout(t)},[e]),t};var o=n(14934),l=n(35002),a=n(79106);let c=e=>{let{tooltipContent:t}=e;return s(2e3)?(0,r.jsx)(o.x,{margin:{top:1},children:(0,r.jsx)(l.u,{placement:"top",canShow:!!t,content:t||"",children:(0,r.jsx)(a.$,{purpose:"body-text"})})}):null}},98956:function(e,t,n){n.d(t,{w:function(){return r}});let r=e=>{let t=new Set,n=new Set;return e.forEach(e=>{t.has(e)?n.add(e):t.add(e)}),n}},50646:function(e,t,n){n.d(t,{N:function(){return c}});var r=n(2784),i=n(4128),s=n(30001),o=n(22563);let l=e=>Array.isArray(e)?e:[],a=(e,t)=>"".concat(e,":dagster.").concat(t),c=(e,t)=>{let{basePath:n}=(0,r.useContext)(i.I),c=a(n,e),[d,u]=(0,s.U)(c,l),h=(0,r.useCallback)(e=>{let t="object"==typeof e?(0,o.Uz)(e):e;u(e=>{let n=new Set(e||[]);return n.has(t)?n.delete(t):n.add(t),Array.from(n)})},[u]),p=(0,r.useCallback)(e=>{u(n=>{let r=new Set(n||[]);return t.forEach(t=>{e?r.delete(t):r.add(t)}),Array.from(r)})},[t,u]),m=(0,r.useMemo)(()=>{let e=new Set(d);return t.filter(t=>!e.has(t))},[t,d]);return(0,r.useMemo)(()=>({expandedKeys:m,onToggle:h,onToggleAll:p}),[m,h,p])}},6624:function(e,t,n){n.d(t,{o:function(){return U},i:function(){return q}});var r=n(73235),i=n(52322),s=n(3842),o=n(89130),l=n(35002),a=n(37504),c=n(14934),d=n(53664),u=n(35292),h=n(39013),p=n(55010),m=n(60603),x=n(38491),g=n(92917),f=n(2784),j=n(47933),v=n(35505),y=n(83738),S=n(100),b=n(10539),w=n(16336),k=n(88257),E=n(60648),C=n(77837),T=n(34219),I=n(33847),N=n(33182),P=n(4219),R=n(43212);let A=(e,t)=>{if(e===k.ynu.STOPPED&&0===t||e===k.ynu.RUNNING&&1===t)return null;let n=[];return e===k.ynu.RUNNING&&0===t?n.push("Schedule is set to be running, but either the scheduler is not configured or the scheduler is not running the schedule"):e===k.ynu.STOPPED&&t>0&&n.push("Schedule is set to be stopped, but the scheduler is still running the schedule"),t>0&&n.push("Duplicate cron job for schedule found."),(0,i.jsx)(p.J,{interactionKind:"hover",popoverClassName:"bp4-popover-content-sizing",position:"right",content:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:8},padding:12,children:[(0,i.jsx)("strong",{children:"There are errors with this schedule."}),(0,i.jsx)("div",{children:"Errors:"}),(0,i.jsx)("ul",{children:n.map((e,t)=>(0,i.jsx)("li",{children:e},t))})]}),children:(0,i.jsx)(R.V,{fill:!0,interactive:!0,intent:"danger",children:"Error"})})};var O=n(86269),_=n(89516),z=n(58905),D=n(43),F=n(17008);function M(){let e=(0,r._)(["\n  query SingleScheduleQuery($selector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $selector) {\n      ... on Schedule {\n        id\n        name\n        pipelineName\n        description\n        scheduleState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        partitionSet {\n          id\n          name\n        }\n        ...ScheduleSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return M=function(){return e},e}let L="60px 1fr 1fr 76px 148px 210px 92px",$="1fr 1fr 76px 148px 210px 92px",q=e=>{let{name:t,repoAddress:n,checked:r,onToggleChecked:o,showCheckboxColumn:v,scheduleState:C,start:N,height:R}=e,M=(0,S.Ux)(n),[L,$]=(0,s.t)(K,{variables:{selector:{repositoryName:n.name,repositoryLocationName:n.location,scheduleName:t}},notifyOnNetworkStatusChange:!0});(0,T.Hu)($,"SingleScheduleQuery"),(0,y.v5)(L),(0,w.C4)($,w.dT);let{data:q}=$,U=f.useMemo(()=>(null==q?void 0:q.scheduleOrError.__typename)!=="Schedule"?null:q.scheduleOrError,[q]),Z=!!(U&&(0,S.E8)(M,U.pipelineName)),V=U?(0,_.A)(U.cronSchedule,U.executionTimezone||"UTC"):"",J=f.useMemo(()=>{let{hasStartPermission:e,hasStopPermission:t,status:n}=C;return n!==k.ynu.RUNNING||t?n!==k.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[C]),Q=null==U?void 0:U.scheduleState.ticks[0];return(0,i.jsx)(F.X2,{$height:R,$start:N,children:(0,i.jsxs)(B,{border:"bottom",$showCheckboxColumn:v,children:[v?(0,i.jsx)(F.E5,{children:(0,i.jsx)(l.u,{canShow:J.disabled,content:J.message||"",placement:"top",children:(0,i.jsx)(a.X,{disabled:J.disabled,checked:r,onChange:e=>{if(o&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;o({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}):null,(0,i.jsx)(F.E5,{children:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(j.rU,{to:(0,b.$U)(n,"/schedules/".concat(t)),children:(0,i.jsx)(d.g,{text:t})})}),U?(0,i.jsx)(u.YS,{children:(0,i.jsx)(I.h,{showIcon:!0,size:"small",pipelineName:U.pipelineName,pipelineHrefContext:n,isJob:Z})}):null]})}),(0,i.jsx)(F.E5,{children:U?(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)(H,{style:{maxWidth:"100%"},children:(0,i.jsx)(l.u,{position:"top-left",content:U.cronSchedule,display:"block",children:(0,i.jsx)("div",{style:{color:h.Ep(),overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},title:V,children:V})})}),U.scheduleState.nextTick&&U.scheduleState.status===k.ynu.RUNNING?(0,i.jsx)(u.YS,{children:(0,i.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,i.jsx)(O.v,{timestamp:U.scheduleState.nextTick.timestamp,timezone:U.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(F.E5,{children:U?(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)(P.M,{repoAddress:n,schedule:U},t),A(U.scheduleState.status,U.scheduleState.runningCount)]}):null}),(0,i.jsx)(F.E5,{children:Q?(0,i.jsx)("div",{children:(0,i.jsx)(z.a,{tick:Q})}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(F.E5,{children:(null==U?void 0:U.scheduleState)&&(null==U?void 0:U.scheduleState.runs[0])?(0,i.jsx)(E.Z,{run:U.scheduleState.runs[0],name:t,showButton:!1,showHover:!0,showSummary:!1}):(0,i.jsx)(y.mq,{queryResult:$})}),(0,i.jsx)(F.E5,{children:(null==U?void 0:U.partitionSet)?(0,i.jsx)(p.J,{content:(0,i.jsxs)(m.v2,{children:[(0,i.jsx)(D.U,{text:"View partition history",icon:"dynamic_feed",target:"_blank",to:(0,b.$U)(n,"/".concat(Z?"jobs":"pipelines","/").concat(U.pipelineName,"/partitions"))}),(0,i.jsx)(D.U,{text:"Launch partition backfill",icon:"add_circle",target:"_blank",to:(0,b.$U)(n,"/".concat(Z?"jobs":"pipelines","/").concat(U.pipelineName,"/partitions"))})]}),position:"bottom-left",children:(0,i.jsx)(x.zx,{icon:(0,i.jsx)(g.JO,{name:"expand_more"})})}):(0,i.jsx)("span",{style:{color:h.$()},children:"–"})})]})})},U=e=>{let{checkbox:t}=e;return(0,i.jsxs)(F.VJ,{templateColumns:t?L:$,sticky:!0,children:[t?(0,i.jsx)(F.qN,{children:(0,i.jsx)("div",{style:{position:"relative",top:"-1px"},children:t})}):null,(0,i.jsx)(F.qN,{children:"Schedule name"}),(0,i.jsx)(F.qN,{children:"Schedule"}),(0,i.jsx)(F.qN,{children:"Running"}),(0,i.jsx)(F.qN,{children:"Last tick"}),(0,i.jsx)(F.qN,{children:"Last run"}),(0,i.jsx)(F.qN,{children:"Actions"})]})},B=(0,v.ZP)(c.x).withConfig({componentId:"sc-f1848bf2-0"})(["display:grid;grid-template-columns:",";height:100%;"],e=>{let{$showCheckboxColumn:t}=e;return t?L:$}),H=v.ZP.div.withConfig({componentId:"sc-f1848bf2-1"})(["max-width:100%;.bp4-popover2-target{max-width:100%;:focus{outline:none;}}"]),K=(0,o.Ps)(M(),C.dY,N.$X,P.J)},53029:function(e,t,n){n.d(t,{KF:function(){return z},Rx:function(){return _},W_:function(){return F}});var r=n(73235),i=n(52322),s=n(3842),o=n(89130),l=n(35002),a=n(37504),c=n(14934),d=n(53664),u=n(35292),h=n(39013),p=n(43212),m=n(2784),x=n(47933),g=n(35505),f=n(83738),j=n(10539),v=n(16336),y=n(88257),S=n(60648),b=n(77837),w=n(34219),k=n(33182),E=n(55546),C=n(6265),T=n(69698),I=n(75306),N=n(58905),P=n(17008);function R(){let e=(0,r._)(["\n  query SingleSensorQuery($selector: SensorSelector!) {\n    sensorOrError(sensorSelector: $selector) {\n      ... on Sensor {\n        id\n        description\n        name\n        targets {\n          pipelineName\n        }\n        metadata {\n          assetKeys {\n            path\n          }\n        }\n        minIntervalSeconds\n        description\n        sensorState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return R=function(){return e},e}let A="1.5fr 150px 1fr 76px 120px 148px 180px",O="60px ".concat(A),_=e=>{let{name:t,repoAddress:n,checked:r,onToggleChecked:o,showCheckboxColumn:g,sensorState:b,start:k,height:R}=e,[A,O]=(0,s.t)(M,{variables:{selector:{repositoryName:n.name,repositoryLocationName:n.location,sensorName:t}}});(0,w.Hu)(O,"SingleSensorQuery");let[_,z]=(0,s.t)(C.Z,{variables:{sensorSelector:{repositoryName:n.name,repositoryLocationName:n.location,sensorName:t}}});(0,w.Hu)(z,"SensorAssetSelectionQuery"),(0,f.v5)(m.useCallback(()=>{A(),_()},[A,_])),(0,v.C4)(O,v.dT),(0,v.C4)(z,v.dT);let{data:L}=O,$=m.useMemo(()=>(null==L?void 0:L.sensorOrError.__typename)!=="Sensor"?null:L.sensorOrError,[L]),q=m.useMemo(()=>{let{hasStartPermission:e,hasStopPermission:t,status:n}=b;return n!==y.ynu.RUNNING||t?n!==y.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[b]),U=null==$?void 0:$.sensorState.ticks[0],B=null==$?void 0:$.sensorType,H=B?F[B]:null;return(0,i.jsx)(P.X2,{$height:R,$start:k,children:(0,i.jsxs)(D,{border:"bottom",$showCheckboxColumn:g,children:[g?(0,i.jsx)(P.E5,{children:(0,i.jsx)(l.u,{canShow:q.disabled,content:q.message||"",placement:"top",children:(0,i.jsx)(a.X,{disabled:q.disabled,checked:r,onChange:e=>{if(o&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;o({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}):null,(0,i.jsx)(P.E5,{children:(0,i.jsxs)(c.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:(0,i.jsx)(x.rU,{to:(0,j.$U)(n,"/sensors/".concat(t)),children:(0,i.jsx)(d.g,{text:t})})}),(0,i.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,i.jsx)(u.YS,{style:{color:h.$(),whiteSpace:"nowrap"},children:null==$?void 0:$.description})})]})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{children:H?H.description?(0,i.jsx)(l.u,{content:H.description,children:(0,i.jsx)(p.V,{icon:H.icon,children:H.name})}):(0,i.jsx)(p.V,{icon:H.icon,children:H.name}):null})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)(c.x,{flex:{direction:"column",gap:4},style:{fontSize:"12px"},children:$?(0,i.jsx)(I.D,{targets:$.targets,repoAddress:n,selectionQueryResult:z,sensorType:$.sensorType}):null})}),(0,i.jsx)(P.E5,{children:$?(0,i.jsx)(c.x,{flex:{direction:"column",gap:4},children:(0,i.jsx)(T.c,{repoAddress:n,sensor:$},t)}):null}),(0,i.jsx)(P.E5,{children:$?(0,i.jsx)("div",{style:{color:h.Ep()},children:(0,E.F)($.minIntervalSeconds)}):(0,i.jsx)(f.mq,{queryResult:O})}),(0,i.jsx)(P.E5,{children:U?(0,i.jsx)("div",{children:(0,i.jsx)(N.a,{tick:U})}):(0,i.jsx)(f.mq,{queryResult:O})}),(0,i.jsx)(P.E5,{children:(null==$?void 0:$.sensorState)&&(null==$?void 0:$.sensorState.runs[0])?(0,i.jsx)(S.Z,{run:$.sensorState.runs[0],name:t,showButton:!1,showHover:!0,showSummary:!1}):(0,i.jsx)(f.mq,{queryResult:O})})]})})},z=e=>{let{checkbox:t}=e;return(0,i.jsxs)(P.VJ,{templateColumns:t?O:A,sticky:!0,children:[t?(0,i.jsx)(P.qN,{children:(0,i.jsx)("div",{style:{position:"relative",top:"-1px"},children:t})}):null,(0,i.jsx)(P.qN,{children:"Name"}),(0,i.jsx)(P.qN,{children:"Type"}),(0,i.jsx)(P.qN,{children:"Target"}),(0,i.jsx)(P.qN,{children:"Running"}),(0,i.jsx)(P.qN,{children:"Frequency"}),(0,i.jsx)(P.qN,{children:"Last tick"}),(0,i.jsx)(P.qN,{children:"Last run"})]})},D=(0,g.ZP)(c.x).withConfig({componentId:"sc-8525a779-0"})(["display:grid;grid-template-columns:",";height:100%;"],e=>{let{$showCheckboxColumn:t}=e;return t?O:A}),F={[y.dEY.ASSET]:{name:"Asset",icon:"asset",description:"Asset sensors instigate runs when a materialization occurs"},[y.dEY.AUTO_MATERIALIZE]:{name:"Auto-materialize",icon:"materialization",description:"Auto-materialize sensors trigger runs based on auto-materialize policies defined on assets."},[y.dEY.AUTOMATION]:{name:"Automation",icon:"materialization",description:"Automation sensors trigger runs based on conditions defined on assets."},[y.dEY.FRESHNESS_POLICY]:{name:"Freshness policy",icon:"hourglass",description:"Freshness sensors check the freshness of assets on each tick, then perform an action in response to that status"},[y.dEY.MULTI_ASSET]:{name:"Multi-asset",icon:"multi_asset",description:"Multi asset sensors trigger job executions based on multiple asset materialization event streams"},[y.dEY.RUN_STATUS]:{name:"Run status",icon:"alternate_email",description:"Run status sensors react to run status"},[y.dEY.STANDARD]:{name:"Standard",icon:"sensors",description:null},[y.dEY.UNKNOWN]:{name:"Standard",icon:"sensors",description:null}},M=(0,o.Ps)(R(),b.dY,k.$X,T.U)}}]);
//# sourceMappingURL=1872.b018d3024677fae2.js.map